
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Load dataset &#8212; Aerobic Saftey Margins for Marine Ectotherms</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Aerobic Saftey Margins for Marine Ectotherms</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Metabolic Index Traits
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="metabolic-index-defining.html">
   The Metabolic Index
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="trait-space-joint-pdf.html">
   Defining trait space
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="trait-space-obs-habitat-vol.html">
   Defining the Aerobic Safety Margin
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Earth System Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="data-assets-preprocessing.html">
   Overview
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="obs-woa2018.html">
     World Ocean Atlas Dataset
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="compute-drift-corr-cesm-le.html">
     Compute and apply linear drift correction to CESM1-LE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="compute-pO2-cesm-le.html">
     Compute oxygen partial pressure
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="compute-viable-traits.html">
     Viable traits
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="compute-aerobic-safety-margin.html">
     Compute the Aerobic Safety Margin
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Aerobic Safety Margin
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="aerobic-habitat-change.html">
   Changes in aerobic habitat
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  References
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="references.html">
   References
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/matt-long/aerobic-safety-margins/main?urlpath=lab/tree/notebooks/compute-zonal-safety-margin-metrics.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://jupyterhub.hpc.ucar.edu/hub/user-redirect/git-pull?repo=https%3A//github.com/matt-long/aerobic-safety-margins&urlpath=lab/tree/aerobic-safety-margins/notebooks/compute-zonal-safety-margin-metrics.ipynb&branch=main"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on JupyterHub"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_jupyterhub.svg">
  </span>
<span class="headerbtn__text-container">JupyterHub</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/matt-long/aerobic-safety-margins"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/compute-zonal-safety-margin-metrics.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Load dataset
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#observationally-based-trait-viability">
     Observationally-based trait viability
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cesm-le-trait-viability-data">
     CESM-LE trait viability data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compute-trait-frequency-fields">
   Compute trait frequency fields
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compute-zonal-distribution-of-trait-weighted-safety-margins">
   Compute zonal distribution of trait-weighted safety margins
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Load dataset</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Load dataset
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#observationally-based-trait-viability">
     Observationally-based trait viability
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cesm-le-trait-viability-data">
     CESM-LE trait viability data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compute-trait-frequency-fields">
   Compute trait frequency fields
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compute-zonal-distribution-of-trait-weighted-safety-margins">
   Compute zonal distribution of trait-weighted safety margins
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>

<span class="kn">import</span> <span class="nn">cartopy</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
<span class="kn">import</span> <span class="nn">cmocean</span>
<span class="kn">import</span> <span class="nn">constants</span>
<span class="kn">import</span> <span class="nn">dask</span>
<span class="kn">import</span> <span class="nn">data_collections</span> <span class="k">as</span> <span class="nn">dc</span>
<span class="kn">import</span> <span class="nn">funnel</span>
<span class="kn">import</span> <span class="nn">intake</span>
<span class="kn">import</span> <span class="nn">matplotlib.gridspec</span> <span class="k">as</span> <span class="nn">gridspec</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">metabolic</span> <span class="k">as</span> <span class="nn">mi</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">util</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/dask_jobqueue/core.py:20: FutureWarning: tmpfile is deprecated and will be removed in a future release. Please use dask.utils.tmpfile instead.
  from distributed.utils import tmpfile
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">cluster</span>
    <span class="n">client</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">cluster</span><span class="p">,</span> <span class="n">client</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">get_ClusterClient</span><span class="p">(</span><span class="n">memory</span><span class="o">=</span><span class="s1">&#39;16GB&#39;</span><span class="p">)</span>
    <span class="n">cluster</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
<span class="n">client</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
    <div style="width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;"> </div>
    <div style="margin-left: 48px;">
        <h3 style="margin-bottom: 0px;">Client</h3>
        <p style="color: #9D9D9D; margin-bottom: 0px;">Client-55a08a26-a06f-11ec-9cb5-3cecef1b126a</p>
        <table style="width: 100%; text-align: left;">

        <tr>

            <td style="text-align: left;"><strong>Connection method:</strong> Cluster object</td>
            <td style="text-align: left;"><strong>Cluster type:</strong> dask_jobqueue.PBSCluster</td>

        </tr>


            <tr>
                <td style="text-align: left;">
                    <strong>Dashboard: </strong> <a href="https://jupyterhub.hpc.ucar.edu/stable/user/mclong/asm/proxy/8787/status" target="_blank">https://jupyterhub.hpc.ucar.edu/stable/user/mclong/asm/proxy/8787/status</a>
                </td>
                <td style="text-align: left;"></td>
            </tr>


        </table>


            <details>
            <summary style="margin-bottom: 20px;"><h3 style="display: inline;">Cluster Info</h3></summary>
            <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h3 style="margin-bottom: 0px; margin-top: 0px;">PBSCluster</h3>
        <p style="color: #9D9D9D; margin-bottom: 0px;">3cb3c8d5</p>
        <table style="width: 100%; text-align: left;">
            <tr>
                <td style="text-align: left;">
                    <strong>Dashboard:</strong> <a href="https://jupyterhub.hpc.ucar.edu/stable/user/mclong/asm/proxy/8787/status" target="_blank">https://jupyterhub.hpc.ucar.edu/stable/user/mclong/asm/proxy/8787/status</a>
                </td>
                <td style="text-align: left;">
                    <strong>Workers:</strong> 0
                </td>
            </tr>
            <tr>
                <td style="text-align: left;">
                    <strong>Total threads:</strong> 0
                </td>
                <td style="text-align: left;">
                    <strong>Total memory:</strong> 0 B
                </td>
            </tr>

        </table>

        <details>
            <summary style="margin-bottom: 20px;">
                <h3 style="display: inline;">Scheduler Info</h3>
            </summary>

            <div style="">
    <div>
        <div style="width: 24px; height: 24px; background-color: #FFF7E5; border: 3px solid #FF6132; border-radius: 5px; position: absolute;"> </div>
        <div style="margin-left: 48px;">
            <h3 style="margin-bottom: 0px;">Scheduler</h3>
            <p style="color: #9D9D9D; margin-bottom: 0px;">Scheduler-27180e65-c62c-4746-95c5-631125d78476</p>
            <table style="width: 100%; text-align: left;">
                <tr>
                    <td style="text-align: left;">
                        <strong>Comm:</strong> tcp://10.12.206.52:33353
                    </td>
                    <td style="text-align: left;">
                        <strong>Workers:</strong> 0
                    </td>
                </tr>
                <tr>
                    <td style="text-align: left;">
                        <strong>Dashboard:</strong> <a href="https://jupyterhub.hpc.ucar.edu/stable/user/mclong/asm/proxy/8787/status" target="_blank">https://jupyterhub.hpc.ucar.edu/stable/user/mclong/asm/proxy/8787/status</a>
                    </td>
                    <td style="text-align: left;">
                        <strong>Total threads:</strong> 0
                    </td>
                </tr>
                <tr>
                    <td style="text-align: left;">
                        <strong>Started:</strong> Just now
                    </td>
                    <td style="text-align: left;">
                        <strong>Total memory:</strong> 0 B
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <details style="margin-left: 48px;">
        <summary style="margin-bottom: 20px;">
            <h3 style="display: inline;">Workers</h3>
        </summary>



    </details>
</div>

        </details>
    </div>
</div>
            </details>


    </div>
</div></div></div>
</div>
<section id="load-dataset">
<h1>Load dataset<a class="headerlink" href="#load-dataset" title="Permalink to this headline">#</a></h1>
<p>Read the collection of datasets to support this computation. First step, connect to the local catalog; this contains datasets computed elsewhere in the project.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">curator</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">curator_local_assets</span><span class="p">()</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">curator</span><span class="o">.</span><span class="n">open_catalog</span><span class="p">()</span>
<span class="n">curator</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict_keys([&#39;ASM-Tmax-1x1&#39;, &#39;cesm-le-epoch-means&#39;, &#39;cesm-le-global-ts&#39;, &#39;trait-space&#39;, &#39;trait-space-hires&#39;, &#39;viable-traits-mask-cesm-1x1&#39;, &#39;viable-traits-mask-woa2018&#39;, &#39;woa2018&#39;, &#39;zonal-safety-margin-metrics-cesm1x1&#39;, &#39;zonal-safety-margin-metrics-woa2018&#39;])
</pre></div>
</div>
</div>
</div>
<section id="observationally-based-trait-viability">
<h2>Observationally-based trait viability<a class="headerlink" href="#observationally-based-trait-viability" title="Permalink to this headline">#</a></h2>
<p>Trait viability data computed from the WOA2018</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;viable-traits-mask-woa2018&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">cat</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">ds_obs</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">to_dask</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="n">ds_obs</span><span class="p">[</span><span class="s1">&#39;vol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds_obs</span><span class="o">.</span><span class="n">dz</span> <span class="o">*</span> <span class="n">ds_obs</span><span class="o">.</span><span class="n">area</span>
<span class="n">ds_obs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>viable-traits-mask-woa2018: 
        Viable traits mask computed from woa2018 by compute-viable-traits.ipynb
        Viability criteria: 
          - via_Phi: 1 &lt; mean(Phi) &lt; 2
          - via_ATmax: mean(T) &lt; ATmax
        

CPU times: user 5.13 s, sys: 17.4 s, total: 22.6 s
Wall time: 33.7 s
</pre></div>
</div>
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:            (Ac: 12, Eo: 11, Ao: 12, depth: 47, lat: 180, lon: 360)
Coordinates:
  * Ac                 (Ac) float64 0.03 0.037 0.0456 ... 0.1974 0.2433 0.3
  * Ao                 (Ao) float64 0.06811 0.08867 0.1147 ... 0.784 0.9872
  * Eo                 (Eo) float64 -0.5 -0.3056 -0.1111 ... 0.8611 1.056 1.25
  * depth              (depth) float32 0.0 5.0 10.0 15.0 ... 900.0 950.0 1e+03
  * lat                (lat) float32 -89.5 -88.5 -87.5 -86.5 ... 87.5 88.5 89.5
  * lon                (lon) float32 -179.5 -178.5 -177.5 ... 177.5 178.5 179.5
Data variables:
    ATmax_active       (Ac, Eo) float64 nan nan nan nan ... 27.2 25.63 24.37
    ATmax_resting      (Ao, Eo) float64 42.49 35.22 29.01 ... 33.29 31.24 29.54
    Phi_active         (Ac, Eo, depth, lat, lon) float64 nan nan ... 49.65 49.65
    Phi_resting        (Ao, Eo, depth, lat, lon) float64 nan nan ... 163.4 163.4
    area               (lat, lon) float64 1.079e+08 1.079e+08 ... 1.079e+08
    dz                 (depth) float32 2.5 5.0 5.0 5.0 ... 50.0 50.0 50.0 50.0
    trait_spc_active   (Ac, Eo) float64 0.0001004 0.0006727 ... 6.159e-06
    trait_spc_resting  (Ao, Eo) float64 0.0001098 0.0007361 ... 5.384e-06
    viability_active   (Ac, Eo, depth, lat, lon) float64 0.0 0.0 0.0 ... 0.0 0.0
    viability_resting  (Ao, Eo, depth, lat, lon) float64 0.0 0.0 0.0 ... 0.0 0.0
    vol                (depth, lat, lon) float64 2.697e+08 ... 5.395e+09</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-df8c3ae4-61c1-407d-84ce-eebc757e82f2' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-df8c3ae4-61c1-407d-84ce-eebc757e82f2' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>Ac</span>: 12</li><li><span class='xr-has-index'>Eo</span>: 11</li><li><span class='xr-has-index'>Ao</span>: 12</li><li><span class='xr-has-index'>depth</span>: 47</li><li><span class='xr-has-index'>lat</span>: 180</li><li><span class='xr-has-index'>lon</span>: 360</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-f54a37ea-529a-4d96-a897-5b91985bf74e' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f54a37ea-529a-4d96-a897-5b91985bf74e' class='xr-section-summary' >Coordinates: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>Ac</span></div><div class='xr-var-dims'>(Ac)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.03 0.037 0.0456 ... 0.2433 0.3</div><input id='attrs-5ceba370-fa84-4651-9a84-face507d5dbd' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5ceba370-fa84-4651-9a84-face507d5dbd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-72decfe6-c8b5-4b97-ad69-cdf5d1d488f9' class='xr-var-data-in' type='checkbox'><label for='data-72decfe6-c8b5-4b97-ad69-cdf5d1d488f9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Hypoxic tolerance (normalized by $\Phi_{crit}$)</dd><dt><span>units :</span></dt><dd>1/kPa</dd></dl></div><div class='xr-var-data'><pre>array([0.03  , 0.037 , 0.0456, 0.0562, 0.0693, 0.0854, 0.1053, 0.1299, 0.1601,
       0.1974, 0.2433, 0.3   ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>Ao</span></div><div class='xr-var-dims'>(Ao)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.06811 0.08867 ... 0.784 0.9872</div><input id='attrs-3adfb234-868b-44b6-9205-1bb48f9eb647' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-3adfb234-868b-44b6-9205-1bb48f9eb647' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9df9d4a4-a1ae-465d-b39e-1cb928279a98' class='xr-var-data-in' type='checkbox'><label for='data-9df9d4a4-a1ae-465d-b39e-1cb928279a98' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.068106, 0.088674, 0.114712, 0.147614, 0.189177, 0.241291, 0.306919,
       0.389502, 0.492625, 0.62211 , 0.784033, 0.987234])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>Eo</span></div><div class='xr-var-dims'>(Eo)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.5 -0.3056 -0.1111 ... 1.056 1.25</div><input id='attrs-36dc1d90-605d-4e77-9c02-aa5d1eccb47f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-36dc1d90-605d-4e77-9c02-aa5d1eccb47f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6b255f5f-d247-490a-9e9e-e486e5c7a015' class='xr-var-data-in' type='checkbox'><label for='data-6b255f5f-d247-490a-9e9e-e486e5c7a015' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Temperature sensitivity</dd><dt><span>units :</span></dt><dd>eV</dd></dl></div><div class='xr-var-data'><pre>array([-0.5     , -0.3056  , -0.1111  ,  0.0833  ,  0.2778  ,  0.380678,
        0.4722  ,  0.6667  ,  0.8611  ,  1.0556  ,  1.25    ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>depth</span></div><div class='xr-var-dims'>(depth)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.0 5.0 10.0 ... 900.0 950.0 1e+03</div><input id='attrs-e45900d0-be8b-432b-9e4b-686ecaca0abe' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e45900d0-be8b-432b-9e4b-686ecaca0abe' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-628f9702-3769-46c9-aeae-4d593c0b6a02' class='xr-var-data-in' type='checkbox'><label for='data-628f9702-3769-46c9-aeae-4d593c0b6a02' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Z</dd><dt><span>bounds :</span></dt><dd>depth_bnds</dd><dt><span>positive :</span></dt><dd>down</dd><dt><span>standard_name :</span></dt><dd>depth</dd><dt><span>units :</span></dt><dd>meters</dd></dl></div><div class='xr-var-data'><pre>array([   0.,    5.,   10.,   15.,   20.,   25.,   30.,   35.,   40.,   45.,
         50.,   55.,   60.,   65.,   70.,   75.,   80.,   85.,   90.,   95.,
        100.,  125.,  150.,  175.,  200.,  225.,  250.,  275.,  300.,  325.,
        350.,  375.,  400.,  425.,  450.,  475.,  500.,  550.,  600.,  650.,
        700.,  750.,  800.,  850.,  900.,  950., 1000.], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-89.5 -88.5 -87.5 ... 88.5 89.5</div><input id='attrs-8d7081a8-ad06-429e-9bba-5212f2b860cd' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8d7081a8-ad06-429e-9bba-5212f2b860cd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-97a0cd05-cd3d-4c23-9edf-96363a414562' class='xr-var-data-in' type='checkbox'><label for='data-97a0cd05-cd3d-4c23-9edf-96363a414562' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Y</dd><dt><span>bounds :</span></dt><dd>lat_bnds</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([-89.5, -88.5, -87.5, -86.5, -85.5, -84.5, -83.5, -82.5, -81.5, -80.5,
       -79.5, -78.5, -77.5, -76.5, -75.5, -74.5, -73.5, -72.5, -71.5, -70.5,
       -69.5, -68.5, -67.5, -66.5, -65.5, -64.5, -63.5, -62.5, -61.5, -60.5,
       -59.5, -58.5, -57.5, -56.5, -55.5, -54.5, -53.5, -52.5, -51.5, -50.5,
       -49.5, -48.5, -47.5, -46.5, -45.5, -44.5, -43.5, -42.5, -41.5, -40.5,
       -39.5, -38.5, -37.5, -36.5, -35.5, -34.5, -33.5, -32.5, -31.5, -30.5,
       -29.5, -28.5, -27.5, -26.5, -25.5, -24.5, -23.5, -22.5, -21.5, -20.5,
       -19.5, -18.5, -17.5, -16.5, -15.5, -14.5, -13.5, -12.5, -11.5, -10.5,
        -9.5,  -8.5,  -7.5,  -6.5,  -5.5,  -4.5,  -3.5,  -2.5,  -1.5,  -0.5,
         0.5,   1.5,   2.5,   3.5,   4.5,   5.5,   6.5,   7.5,   8.5,   9.5,
        10.5,  11.5,  12.5,  13.5,  14.5,  15.5,  16.5,  17.5,  18.5,  19.5,
        20.5,  21.5,  22.5,  23.5,  24.5,  25.5,  26.5,  27.5,  28.5,  29.5,
        30.5,  31.5,  32.5,  33.5,  34.5,  35.5,  36.5,  37.5,  38.5,  39.5,
        40.5,  41.5,  42.5,  43.5,  44.5,  45.5,  46.5,  47.5,  48.5,  49.5,
        50.5,  51.5,  52.5,  53.5,  54.5,  55.5,  56.5,  57.5,  58.5,  59.5,
        60.5,  61.5,  62.5,  63.5,  64.5,  65.5,  66.5,  67.5,  68.5,  69.5,
        70.5,  71.5,  72.5,  73.5,  74.5,  75.5,  76.5,  77.5,  78.5,  79.5,
        80.5,  81.5,  82.5,  83.5,  84.5,  85.5,  86.5,  87.5,  88.5,  89.5],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-179.5 -178.5 ... 178.5 179.5</div><input id='attrs-9caee5df-5263-4353-8ac3-649951574125' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9caee5df-5263-4353-8ac3-649951574125' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-04d5b800-ae48-4ad5-8586-d682c9513665' class='xr-var-data-in' type='checkbox'><label for='data-04d5b800-ae48-4ad5-8586-d682c9513665' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>X</dd><dt><span>bounds :</span></dt><dd>lon_bnds</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([-179.5, -178.5, -177.5, ...,  177.5,  178.5,  179.5], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-8bb7c4a8-43c8-468c-908b-199785873991' class='xr-section-summary-in' type='checkbox'  checked><label for='section-8bb7c4a8-43c8-468c-908b-199785873991' class='xr-section-summary' >Data variables: <span>(11)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ATmax_active</span></div><div class='xr-var-dims'>(Ac, Eo)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>nan nan nan ... 27.2 25.63 24.37</div><input id='attrs-d837ae92-e74f-41cf-a952-f405b7f57e18' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d837ae92-e74f-41cf-a952-f405b7f57e18' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c1faeb19-07c0-43de-9da0-5bf3bbe5e367' class='xr-var-data-in' type='checkbox'><label for='data-c1faeb19-07c0-43de-9da0-5bf3bbe5e367' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>N_traits :</span></dt><dd>132</dd><dt><span>long_name :</span></dt><dd>AT$_{max}$ (active)</dd><dt><span>metabolic_baseline :</span></dt><dd>active</dd><dt><span>note :</span></dt><dd>computed using dEodT = 0.022</dd><dt><span>units :</span></dt><dd>°C</dd></dl></div><div class='xr-var-data'><pre>array([[        nan,         nan,         nan,         nan,         nan,
                nan,         nan,  9.12730859, 10.87727821, 11.76344084,
        12.31974507],
       [33.13144063,         nan,         nan,         nan,         nan,
                nan, 10.43406143, 12.17508882, 12.89889692, 13.31661478,
        13.59208319],
       [37.21510092, 28.04443692,         nan,         nan, 14.10220815,
        14.36775311, 14.49690703, 14.64775217, 14.72848583, 14.77899364,
        14.8135903 ],
       [40.19896232, 32.3843264 , 25.63454284, 20.9839242 , 18.57820288,
        17.86770947, 17.41838582, 16.79539619, 16.41906669, 16.17000352,
        15.99412817],
       [42.68701153, 35.45152062, 29.26641961, 24.64192982, 21.64921391,
        20.58066032, 19.84251597, 18.72880537, 18.00367128, 17.50313858,
        17.14069972],
       [44.86308173, 37.96781837, 32.04687545, 27.4244986 , 24.14853192,
        22.87754236, 21.95774202, 20.49622947, 19.49405076, 18.77926325,
        18.25067852],
       [46.83432444, 40.1695502 , 34.40794206, 29.78166999, 26.32718758,
        24.9201182 , 23.871332  , 22.14432376, 20.91354853, 20.01217287,
        19.33348962],
       [48.65264129, 42.15646148, 36.50292892, 31.87055162, 28.28900512,
        26.78184995, 25.63500684, 23.69611134, 22.27223403, 21.2063281 ,
        20.39112313],
       [50.34063127, 43.97337857, 38.39802047, 33.75865933, 30.08047353,
        28.49581585, 27.27137665, 25.15890003, 23.56985669, 22.35823039,
        21.41886987],
       [51.9327474 , 45.66836617, 40.15266211, 35.50593205, 31.75011664,
        30.10257747, 28.81422886, 26.55506396, 24.82164667, 23.47891731,
        22.42527661],
       [53.43982934, 47.25943178, 41.79060964, 37.13640279, 33.31630473,
        31.61642253, 30.27429834, 27.88924431, 26.02851283, 24.56733218,
        23.408363  ],
       [54.88009145, 48.76995014, 43.33903731, 38.67734409, 34.80243411,
        33.05782214, 31.66937797, 29.17419448, 27.1995825 , 25.63023548,
        24.37338399]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ATmax_resting</span></div><div class='xr-var-dims'>(Ao, Eo)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>42.49 35.22 29.01 ... 31.24 29.54</div><input id='attrs-8e4a3868-69f7-4851-8fab-0aba6f0cc76e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8e4a3868-69f7-4851-8fab-0aba6f0cc76e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-33961543-ac27-4717-8ccc-1b005820f824' class='xr-var-data-in' type='checkbox'><label for='data-33961543-ac27-4717-8ccc-1b005820f824' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>N_traits :</span></dt><dd>132</dd><dt><span>long_name :</span></dt><dd>AT$_{max}$ (resting)</dd><dt><span>metabolic_baseline :</span></dt><dd>resting</dd><dt><span>note :</span></dt><dd>computed using dEodT = 0.022</dd><dt><span>units :</span></dt><dd>°C</dd></dl></div><div class='xr-var-data'><pre>array([[42.49409759, 35.22248808, 29.00694811, 24.38171   , 21.42103048,
        20.37421517, 19.65480909, 18.57523357, 17.87593619, 17.39472488,
        17.04694303],
       [45.23078402, 38.38314368, 32.49629596, 27.87349014, 24.55997973,
        23.26086752, 22.31484388, 20.80059341, 19.7541912 , 19.00399989,
        18.44732194],
       [47.59254567, 41.00240304, 35.28947409, 30.66087839, 27.14992994,
        25.69867352, 24.60691091, 22.78808544, 21.47479106, 20.50387923,
        19.76797258],
       [49.69776107, 43.28408573, 37.68101706, 33.04443318, 29.40107125,
        27.84445625, 26.64825059, 24.59951908, 23.07185272, 21.91491163,
        21.02249891],
       [51.61643432, 45.33286765, 39.80622229, 35.16100485, 31.41973865,
        29.78401728, 28.50773999, 26.27653051, 24.57096113, 23.25378805,
        22.22261469],
       [53.38145288, 47.19801394, 41.72752328, 37.07361346, 33.25586383,
        31.5578967 , 30.21774849, 27.83735839, 25.9813987 , 24.52470508,
        23.36976145],
       [55.03306806, 48.92988376, 43.50265717, 38.8401526 , 34.95974787,
        33.21065017, 31.81754391, 29.3111931 , 27.32490611, 25.74435348,
        24.47727   ],
       [56.59160897, 50.55440985, 45.16150774, 40.49058957, 36.55731328,
        34.7650668 , 33.3269735 , 30.71212361, 28.61121685, 26.91952212,
        25.55003106],
       [58.06318095, 52.08100391, 46.71578561, 42.03671621, 38.05807314,
        36.22886259, 34.75204794, 32.04279306, 29.84045345, 28.04872201,
        26.58564135],
       [59.46975573, 53.53452369, 48.19218239, 43.50517435, 39.48663212,
        37.62500015, 36.11410713, 33.32105021, 31.02740111, 29.14430341,
        27.59459624],
       [60.81579159, 54.92100116, 49.5977591 , 44.90304654, 40.84903027,
        38.95867102, 37.41750884, 34.54950052, 32.1732204 , 30.20639785,
        28.57636561],
       [62.11406581, 56.25463481, 50.94757734, 46.24535334, 42.15929797,
        40.24309394, 38.67465297, 35.73871718, 33.28679939, 31.24249501,
        29.53733979]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>Phi_active</span></div><div class='xr-var-dims'>(Ac, Eo, depth, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>nan nan nan ... 49.65 49.65 49.65</div><input id='attrs-1c7dcba9-0c06-43d8-a979-a98efc6df9a1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1c7dcba9-0c06-43d8-a979-a98efc6df9a1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c08abe46-2e04-4dc7-8cfa-56c86ef94c06' class='xr-var-data-in' type='checkbox'><label for='data-c08abe46-2e04-4dc7-8cfa-56c86ef94c06' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[[[        nan,         nan,         nan, ...,         nan,
                   nan,         nan],
          [        nan,         nan,         nan, ...,         nan,
                   nan,         nan],
          [        nan,         nan,         nan, ...,         nan,
                   nan,         nan],
          ...,
          [ 0.07687306,  0.07693113,  0.077005  , ...,  0.07661298,
            0.07660021,  0.07662339],
          [ 0.07583008,  0.07583212,  0.07579043, ...,  0.07573912,
            0.07580652,  0.07579724],
          [ 0.07522727,  0.07522727,  0.07522727, ...,  0.07522727,
            0.07522727,  0.07522727]],

         [[        nan,         nan,         nan, ...,         nan,
                   nan,         nan],
          [        nan,         nan,         nan, ...,         nan,
                   nan,         nan],
          [        nan,         nan,         nan, ...,         nan,
                   nan,         nan],
...
          [48.79769058, 48.77637608, 48.76305627, ..., 48.8204937 ,
           48.81893208, 48.79911262],
          [48.95794233, 48.95246984, 48.9474528 , ..., 48.97153208,
           48.96686888, 48.96256972],
          [49.13266166, 49.13266166, 49.13266166, ..., 49.13266166,
           49.13266166, 49.13266166]],

         [[        nan,         nan,         nan, ...,         nan,
                   nan,         nan],
          [        nan,         nan,         nan, ...,         nan,
                   nan,         nan],
          [        nan,         nan,         nan, ...,         nan,
                   nan,         nan],
          ...,
          [49.35007137, 49.3765338 , 49.31254411, ..., 49.39638086,
           49.38518552, 49.36790149],
          [49.54043392, 49.53190601, 49.52218237, ..., 49.56639614,
           49.55795726, 49.54892792],
          [49.6531241 , 49.6531241 , 49.6531241 , ..., 49.6531241 ,
           49.6531241 , 49.6531241 ]]]]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>Phi_resting</span></div><div class='xr-var-dims'>(Ao, Eo, depth, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>nan nan nan ... 163.4 163.4 163.4</div><input id='attrs-b67c8612-6e66-46ad-b27e-0365263de2d5' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b67c8612-6e66-46ad-b27e-0365263de2d5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-30b0d44f-9a2f-4712-873e-9ee163791d2a' class='xr-var-data-in' type='checkbox'><label for='data-30b0d44f-9a2f-4712-873e-9ee163791d2a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[[[           nan,            nan,            nan, ...,
                      nan,            nan,            nan],
          [           nan,            nan,            nan, ...,
                      nan,            nan,            nan],
          [           nan,            nan,            nan, ...,
                      nan,            nan,            nan],
          ...,
          [1.74518340e-01, 1.74650180e-01, 1.74817866e-01, ...,
           1.73927895e-01, 1.73898898e-01, 1.73951528e-01],
          [1.72150548e-01, 1.72155189e-01, 1.72060529e-01, ...,
           1.71944041e-01, 1.72097064e-01, 1.72076000e-01],
          [1.70782036e-01, 1.70782036e-01, 1.70782036e-01, ...,
           1.70782036e-01, 1.70782036e-01, 1.70782036e-01]],

         [[           nan,            nan,            nan, ...,
                      nan,            nan,            nan],
          [           nan,            nan,            nan, ...,
                      nan,            nan,            nan],
          [           nan,            nan,            nan, ...,
                      nan,            nan,            nan],
...
          [1.60582379e+02, 1.60512236e+02, 1.60468406e+02, ...,
           1.60657416e+02, 1.60652280e+02, 1.60587060e+02],
          [1.61109733e+02, 1.61091723e+02, 1.61075217e+02, ...,
           1.61154452e+02, 1.61139109e+02, 1.61124958e+02],
          [1.61684693e+02, 1.61684693e+02, 1.61684693e+02, ...,
           1.61684693e+02, 1.61684693e+02, 1.61684693e+02]],

         [[           nan,            nan,            nan, ...,
                      nan,            nan,            nan],
          [           nan,            nan,            nan, ...,
                      nan,            nan,            nan],
          [           nan,            nan,            nan, ...,
                      nan,            nan,            nan],
          ...,
          [1.62400140e+02, 1.62487227e+02, 1.62276647e+02, ...,
           1.62552537e+02, 1.62515694e+02, 1.62458814e+02],
          [1.63026585e+02, 1.62998521e+02, 1.62966522e+02, ...,
           1.63112015e+02, 1.63084250e+02, 1.63054533e+02],
          [1.63397422e+02, 1.63397422e+02, 1.63397422e+02, ...,
           1.63397422e+02, 1.63397422e+02, 1.63397422e+02]]]]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>area</span></div><div class='xr-var-dims'>(lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.079e+08 1.079e+08 ... 1.079e+08</div><input id='attrs-50339ab2-9886-4bf1-a1a6-e358c3f8177b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-50339ab2-9886-4bf1-a1a6-e358c3f8177b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c781d599-e6ba-42b5-8dbe-5a09a52bdd99' class='xr-var-data-in' type='checkbox'><label for='data-c781d599-e6ba-42b5-8dbe-5a09a52bdd99' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>area</dd><dt><span>units :</span></dt><dd>m^2</dd></dl></div><div class='xr-var-data'><pre>array([[1.07893077e+08, 1.07893077e+08, 1.07893077e+08, ...,
        1.07893077e+08, 1.07893077e+08, 1.07893077e+08],
       [3.23679231e+08, 3.23679231e+08, 3.23679231e+08, ...,
        3.23679231e+08, 3.23679231e+08, 3.23679231e+08],
       [5.39380929e+08, 5.39380929e+08, 5.39380929e+08, ...,
        5.39380929e+08, 5.39380929e+08, 5.39380929e+08],
       ...,
       [5.39380929e+08, 5.39380929e+08, 5.39380929e+08, ...,
        5.39380929e+08, 5.39380929e+08, 5.39380929e+08],
       [3.23679231e+08, 3.23679231e+08, 3.23679231e+08, ...,
        3.23679231e+08, 3.23679231e+08, 3.23679231e+08],
       [1.07893077e+08, 1.07893077e+08, 1.07893077e+08, ...,
        1.07893077e+08, 1.07893077e+08, 1.07893077e+08]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>dz</span></div><div class='xr-var-dims'>(depth)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>2.5 5.0 5.0 5.0 ... 50.0 50.0 50.0</div><input id='attrs-cf8fa2e9-2e1b-4f7d-a8e2-3a3a585650bb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cf8fa2e9-2e1b-4f7d-a8e2-3a3a585650bb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d7279ce6-1502-479c-a215-effc55d82425' class='xr-var-data-in' type='checkbox'><label for='data-d7279ce6-1502-479c-a215-effc55d82425' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>meters</dd></dl></div><div class='xr-var-data'><pre>array([ 2.5,  5. ,  5. ,  5. ,  5. ,  5. ,  5. ,  5. ,  5. ,  5. ,  5. ,
        5. ,  5. ,  5. ,  5. ,  5. ,  5. ,  5. ,  5. ,  5. , 15. , 25. ,
       25. , 25. , 25. , 25. , 25. , 25. , 25. , 25. , 25. , 25. , 25. ,
       25. , 25. , 25. , 37.5, 50. , 50. , 50. , 50. , 50. , 50. , 50. ,
       50. , 50. , 50. ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>trait_spc_active</span></div><div class='xr-var-dims'>(Ac, Eo)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0001004 0.0006727 ... 6.159e-06</div><input id='attrs-2d47c399-d21f-4253-b94a-95a66d382ac0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2d47c399-d21f-4253-b94a-95a66d382ac0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ca51e35e-704d-49d7-b156-0018ee5887ed' class='xr-var-data-in' type='checkbox'><label for='data-ca51e35e-704d-49d7-b156-0018ee5887ed' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>N_traits :</span></dt><dd>132</dd><dt><span>long_name :</span></dt><dd>Trait density (active)</dd><dt><span>metabolic_baseline :</span></dt><dd>active</dd><dt><span>units :</span></dt><dd>eV 1/kPa</dd></dl></div><div class='xr-var-data'><pre>array([[1.00358230e-04, 6.72698399e-04, 2.81408643e-03, 7.33609608e-03,
        1.19297474e-02, 1.27449962e-02, 1.20953656e-02, 7.64600251e-03,
        3.01496564e-03, 7.40878515e-04, 1.13620084e-04],
       [2.15385464e-04, 1.44372273e-03, 6.03949784e-03, 1.57444832e-02,
        2.56032234e-02, 2.73528831e-02, 2.59586678e-02, 1.64095940e-02,
        6.47061807e-03, 1.59004860e-03, 2.43847612e-04],
       [2.90987855e-04, 1.95048344e-03, 8.15942028e-03, 2.12709498e-02,
        3.45902036e-02, 3.69540110e-02, 3.50704125e-02, 2.21695209e-02,
        8.74186790e-03, 2.14817112e-03, 3.29440494e-04],
       [3.03348682e-04, 2.03333771e-03, 8.50602299e-03, 2.21745151e-02,
        3.60595553e-02, 3.85237745e-02, 3.65601629e-02, 2.31112565e-02,
        9.11321231e-03, 2.23942293e-03, 3.43434744e-04],
       [2.65211673e-04, 1.77770641e-03, 7.43664545e-03, 1.93867342e-02,
        3.15261466e-02, 3.36805640e-02, 3.19638178e-02, 2.02057084e-02,
        7.96749890e-03, 1.95788259e-03, 3.00258114e-04],
       [2.02910265e-04, 1.36010182e-03, 5.68968808e-03, 1.48325574e-02,
        2.41202760e-02, 2.57685949e-02, 2.44551330e-02, 1.54591447e-02,
        6.09583768e-03, 1.49795245e-03, 2.29723876e-04],
       [1.38808801e-04, 9.30431502e-04, 3.89225641e-03, 1.01467982e-02,
        1.65004298e-02, 1.76280276e-02, 1.67295020e-02, 1.05754401e-02,
        4.17009913e-03, 1.02473368e-03, 1.57151713e-04],
       [8.60027226e-05, 5.76473839e-04, 2.41155205e-03, 6.28672147e-03,
        1.02232847e-02, 1.09219182e-02, 1.03652125e-02, 6.55229806e-03,
        2.58369697e-03, 6.34901290e-04, 9.73675666e-05],
       [4.88294430e-05, 3.27302387e-04, 1.36919786e-03, 3.56938825e-03,
        5.80443598e-03, 6.20109650e-03, 5.88501779e-03, 3.72017367e-03,
        1.46693593e-03, 3.60475522e-04, 5.52820178e-05],
       [2.54539295e-05, 1.70616976e-04, 7.13738753e-04, 1.86065930e-03,
        3.02575035e-03, 3.23252251e-03, 3.06775624e-03, 1.93926109e-03,
        7.64687892e-04, 1.87909548e-04, 2.88175433e-05],
       [1.22509648e-05, 8.21178736e-05, 3.43522140e-04, 8.95534480e-04,
        1.45629228e-03, 1.55581163e-03, 1.47650969e-03, 9.33365485e-04,
        3.68043938e-04, 9.04407805e-05, 1.38698706e-05],
       [5.43994403e-06, 3.64637924e-05, 1.52538289e-04, 3.97655003e-04,
        6.46655070e-04, 6.90845848e-04, 6.55632452e-04, 4.14453562e-04,
        1.63427000e-04, 4.01595133e-05, 6.15880634e-06]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>trait_spc_resting</span></div><div class='xr-var-dims'>(Ao, Eo)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0001098 0.0007361 ... 5.384e-06</div><input id='attrs-462d84fb-3dd3-4c2c-aebf-d175baaf784d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-462d84fb-3dd3-4c2c-aebf-d175baaf784d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-19a66743-9b9e-49dd-b09a-cdfae49d67bc' class='xr-var-data-in' type='checkbox'><label for='data-19a66743-9b9e-49dd-b09a-cdfae49d67bc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>N_traits :</span></dt><dd>132</dd><dt><span>long_name :</span></dt><dd>Trait density (resting)</dd><dt><span>metabolic_baseline :</span></dt><dd>resting</dd><dt><span>units :</span></dt><dd>eV 1/kPa</dd></dl></div><div class='xr-var-data'><pre>array([[1.09818486e-04, 7.36110232e-04, 3.07935594e-03, 8.02763229e-03,
        1.30543035e-02, 1.39464018e-02, 1.32355338e-02, 8.36675201e-03,
        3.29917101e-03, 8.10717338e-04, 1.24330468e-04],
       [2.27819466e-04, 1.52706750e-03, 6.38815243e-03, 1.66533975e-02,
        2.70812736e-02, 2.89319396e-02, 2.74572375e-02, 1.73569046e-02,
        6.84416083e-03, 1.68184063e-03, 2.57924708e-04],
       [2.99586077e-04, 2.00811708e-03, 8.40051800e-03, 2.18994721e-02,
        3.56122884e-02, 3.80459425e-02, 3.61066867e-02, 2.28245946e-02,
        9.00017601e-03, 2.21164611e-03, 3.39174929e-04],
       [3.05141927e-04, 2.04535778e-03, 8.55630634e-03, 2.23055997e-02,
        3.62727214e-02, 3.87515078e-02, 3.67762883e-02, 2.32478787e-02,
        9.16708506e-03, 2.25266128e-03, 3.45464958e-04],
       [2.61258518e-04, 1.75120853e-03, 7.32579734e-03, 1.90977621e-02,
        3.10562286e-02, 3.31785330e-02, 3.14873760e-02, 1.99045290e-02,
        7.84873807e-03, 1.92869906e-03, 2.95782569e-04],
       [1.96072750e-04, 1.31427014e-03, 5.49796131e-03, 1.43327412e-02,
        2.33074893e-02, 2.49002644e-02, 2.36310625e-02, 1.49382143e-02,
        5.89042479e-03, 1.44747559e-03, 2.21982816e-04],
       [1.31713657e-04, 8.82872952e-04, 3.69330564e-03, 9.62814957e-03,
        1.56570185e-02, 1.67269797e-02, 1.58743817e-02, 1.00348816e-02,
        3.95694656e-03, 9.72354925e-04, 1.49118980e-04],
       [8.01983957e-05, 5.37567598e-04, 2.24879632e-03, 5.86243041e-03,
        9.53331485e-03, 1.01847976e-02, 9.66566394e-03, 6.11008323e-03,
        2.40932317e-03, 5.92051779e-04, 9.07962261e-05],
       [4.47788981e-05, 3.00151699e-04, 1.25561890e-03, 3.27329707e-03,
        5.32294107e-03, 5.68669745e-03, 5.39683839e-03, 3.41157441e-03,
        1.34524931e-03, 3.30573025e-04, 5.06962131e-05],
       [2.29653307e-05, 1.53935968e-04, 6.43957410e-04, 1.67874497e-03,
        2.72992653e-03, 2.91648283e-03, 2.76782556e-03, 1.74966196e-03,
        6.89925315e-04, 1.69537867e-04, 2.60000882e-05],
       [1.08788352e-05, 7.29205276e-05, 3.05047057e-04, 7.95233045e-04,
        1.29318499e-03, 1.38155799e-03, 1.31113801e-03, 8.28826912e-04,
        3.26822370e-04, 8.03112542e-05, 1.23164207e-05],
       [4.75563148e-06, 3.18768645e-05, 1.33349881e-04, 3.47632373e-04,
        5.65309715e-04, 6.03941556e-04, 5.73157796e-04, 3.62317773e-04,
        1.42868857e-04, 3.51076858e-05, 5.38406520e-06]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>viability_active</span></div><div class='xr-var-dims'>(Ac, Eo, depth, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0</div><input id='attrs-8734e712-9ecd-4c23-b161-91b2c01e66d9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8734e712-9ecd-4c23-b161-91b2c01e66d9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9758da7a-59c0-4883-81e0-880fe2bb20a4' class='xr-var-data-in' type='checkbox'><label for='data-9758da7a-59c0-4883-81e0-880fe2bb20a4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>viability based on $\Phi$ criterion</dd></dl></div><div class='xr-var-data'><pre>array([[[[[0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          ...,
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.]],

         [[0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          ...,
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.]],

         [[0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          ...,
...
          ...,
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.]],

         [[0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          ...,
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.]],

         [[0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          ...,
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.]]]]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>viability_resting</span></div><div class='xr-var-dims'>(Ao, Eo, depth, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0</div><input id='attrs-0ce2cc3c-d637-4d36-9ae6-5f24304d5bcf' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0ce2cc3c-d637-4d36-9ae6-5f24304d5bcf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c53fa00f-1e2c-4246-80be-1fc3adf75060' class='xr-var-data-in' type='checkbox'><label for='data-c53fa00f-1e2c-4246-80be-1fc3adf75060' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>viability based on $\Phi$ criterion</dd></dl></div><div class='xr-var-data'><pre>array([[[[[0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          ...,
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.]],

         [[0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          ...,
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.]],

         [[0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          ...,
...
          ...,
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.]],

         [[0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          ...,
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.]],

         [[0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          ...,
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.],
          [0., 0., 0., ..., 0., 0., 0.]]]]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>vol</span></div><div class='xr-var-dims'>(depth, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>2.697e+08 2.697e+08 ... 5.395e+09</div><input id='attrs-da51e5e7-24e2-414e-b0ea-ef22d79610e4' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-da51e5e7-24e2-414e-b0ea-ef22d79610e4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-55f62abb-7892-4b66-827a-34c132643bcc' class='xr-var-data-in' type='checkbox'><label for='data-55f62abb-7892-4b66-827a-34c132643bcc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[2.69732693e+08, 2.69732693e+08, 2.69732693e+08, ...,
         2.69732693e+08, 2.69732693e+08, 2.69732693e+08],
        [8.09198078e+08, 8.09198078e+08, 8.09198078e+08, ...,
         8.09198078e+08, 8.09198078e+08, 8.09198078e+08],
        [1.34845232e+09, 1.34845232e+09, 1.34845232e+09, ...,
         1.34845232e+09, 1.34845232e+09, 1.34845232e+09],
        ...,
        [1.34845232e+09, 1.34845232e+09, 1.34845232e+09, ...,
         1.34845232e+09, 1.34845232e+09, 1.34845232e+09],
        [8.09198078e+08, 8.09198078e+08, 8.09198078e+08, ...,
         8.09198078e+08, 8.09198078e+08, 8.09198078e+08],
        [2.69732693e+08, 2.69732693e+08, 2.69732693e+08, ...,
         2.69732693e+08, 2.69732693e+08, 2.69732693e+08]],

       [[5.39465386e+08, 5.39465386e+08, 5.39465386e+08, ...,
         5.39465386e+08, 5.39465386e+08, 5.39465386e+08],
        [1.61839616e+09, 1.61839616e+09, 1.61839616e+09, ...,
         1.61839616e+09, 1.61839616e+09, 1.61839616e+09],
        [2.69690465e+09, 2.69690465e+09, 2.69690465e+09, ...,
         2.69690465e+09, 2.69690465e+09, 2.69690465e+09],
...
        [2.69690465e+10, 2.69690465e+10, 2.69690465e+10, ...,
         2.69690465e+10, 2.69690465e+10, 2.69690465e+10],
        [1.61839616e+10, 1.61839616e+10, 1.61839616e+10, ...,
         1.61839616e+10, 1.61839616e+10, 1.61839616e+10],
        [5.39465386e+09, 5.39465386e+09, 5.39465386e+09, ...,
         5.39465386e+09, 5.39465386e+09, 5.39465386e+09]],

       [[5.39465386e+09, 5.39465386e+09, 5.39465386e+09, ...,
         5.39465386e+09, 5.39465386e+09, 5.39465386e+09],
        [1.61839616e+10, 1.61839616e+10, 1.61839616e+10, ...,
         1.61839616e+10, 1.61839616e+10, 1.61839616e+10],
        [2.69690465e+10, 2.69690465e+10, 2.69690465e+10, ...,
         2.69690465e+10, 2.69690465e+10, 2.69690465e+10],
        ...,
        [2.69690465e+10, 2.69690465e+10, 2.69690465e+10, ...,
         2.69690465e+10, 2.69690465e+10, 2.69690465e+10],
        [1.61839616e+10, 1.61839616e+10, 1.61839616e+10, ...,
         1.61839616e+10, 1.61839616e+10, 1.61839616e+10],
        [5.39465386e+09, 5.39465386e+09, 5.39465386e+09, ...,
         5.39465386e+09, 5.39465386e+09, 5.39465386e+09]]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-41baba1e-830f-41b3-b8c6-350c62c6ef05' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-41baba1e-830f-41b3-b8c6-350c62c6ef05' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
</section>
<section id="cesm-le-trait-viability-data">
<h2>CESM-LE trait viability data<a class="headerlink" href="#cesm-le-trait-viability-data" title="Permalink to this headline">#</a></h2>
<p>Trait viability and Aerobic Safety Margin data computed from CESM.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ASM-Tmax-1x1&quot;</span><span class="p">,</span> <span class="s2">&quot;viable-traits-mask-cesm-1x1&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">cat</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">ds_asm</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">merge</span><span class="p">([</span><span class="n">cat</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">to_dask</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">])</span>  <span class="c1"># .load()</span>
<span class="n">ds_asm</span><span class="p">[</span><span class="s1">&#39;vol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds_asm</span><span class="o">.</span><span class="n">dz</span> <span class="o">*</span> <span class="n">ds_asm</span><span class="o">.</span><span class="n">area</span>
<span class="n">ds_asm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ASM-Tmax-1x1: ASM maximum temperature compute-aerobic-safety-margin.ipynb
viable-traits-mask-cesm-1x1: 
        Viable traits mask computed from cesm-1x1 by compute-viable-traits.ipynb
        Viability criteria: 
          - via_Phi: 1 &lt; mean(Phi) &lt; 2
          - via_ATmax: mean(T) &lt; ATmax
        
CPU times: user 101 ms, sys: 14.7 ms, total: 115 ms
Wall time: 1.62 s
</pre></div>
</div>
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:            (Ac: 12, Eo: 11, z_t: 40, lat: 180, lon: 360, Ao: 12)
Coordinates:
  * Ac                 (Ac) float64 0.03 0.037 0.0456 ... 0.1974 0.2433 0.3
  * Ao                 (Ao) float64 0.06811 0.08867 0.1147 ... 0.784 0.9872
  * Eo                 (Eo) float64 -0.5 -0.3056 -0.1111 ... 0.8611 1.056 1.25
    dz                 (z_t) float32 dask.array&lt;chunksize=(10,), meta=np.ndarray&gt;
  * lat                (lat) float32 -89.5 -88.5 -87.5 -86.5 ... 87.5 88.5 89.5
  * lon                (lon) float32 -179.5 -178.5 -177.5 ... 177.5 178.5 179.5
  * z_t                (z_t) float32 500.0 1.5e+03 ... 8.788e+04 9.847e+04
Data variables:
    ASM_Tmax_active    (Ac, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(1, 1, 40, 180, 10), meta=np.ndarray&gt;
    ASM_Tmax_resting   (Ao, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(1, 1, 40, 180, 10), meta=np.ndarray&gt;
    ATmax_active       (Ac, Eo) float64 dask.array&lt;chunksize=(12, 11), meta=np.ndarray&gt;
    ATmax_resting      (Ao, Eo) float64 dask.array&lt;chunksize=(12, 11), meta=np.ndarray&gt;
    Phi_active         (Ac, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 45, 90), meta=np.ndarray&gt;
    Phi_resting        (Ao, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 45, 90), meta=np.ndarray&gt;
    area               (lat, lon) float64 dask.array&lt;chunksize=(90, 360), meta=np.ndarray&gt;
    trait_spc_active   (Ac, Eo) float64 dask.array&lt;chunksize=(12, 11), meta=np.ndarray&gt;
    trait_spc_resting  (Ao, Eo) float64 dask.array&lt;chunksize=(12, 11), meta=np.ndarray&gt;
    viability_active   (Ac, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 45, 90), meta=np.ndarray&gt;
    viability_resting  (Ao, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 45, 90), meta=np.ndarray&gt;
    vol                (z_t, lat, lon) float64 dask.array&lt;chunksize=(10, 90, 360), meta=np.ndarray&gt;</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-8461dac3-f56d-4787-a909-bf7109d728b5' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-8461dac3-f56d-4787-a909-bf7109d728b5' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>Ac</span>: 12</li><li><span class='xr-has-index'>Eo</span>: 11</li><li><span class='xr-has-index'>z_t</span>: 40</li><li><span class='xr-has-index'>lat</span>: 180</li><li><span class='xr-has-index'>lon</span>: 360</li><li><span class='xr-has-index'>Ao</span>: 12</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-5e29cc5d-557c-4a86-92e1-04cc32c5ab54' class='xr-section-summary-in' type='checkbox'  checked><label for='section-5e29cc5d-557c-4a86-92e1-04cc32c5ab54' class='xr-section-summary' >Coordinates: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>Ac</span></div><div class='xr-var-dims'>(Ac)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.03 0.037 0.0456 ... 0.2433 0.3</div><input id='attrs-8feca999-3263-40bd-9dd1-c2d2733fb3ea' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8feca999-3263-40bd-9dd1-c2d2733fb3ea' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7db5a775-74c0-4187-ada2-987ed2da5fe7' class='xr-var-data-in' type='checkbox'><label for='data-7db5a775-74c0-4187-ada2-987ed2da5fe7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Hypoxic tolerance (normalized by $\Phi_{crit}$)</dd><dt><span>units :</span></dt><dd>1/kPa</dd></dl></div><div class='xr-var-data'><pre>array([0.03  , 0.037 , 0.0456, 0.0562, 0.0693, 0.0854, 0.1053, 0.1299, 0.1601,
       0.1974, 0.2433, 0.3   ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>Ao</span></div><div class='xr-var-dims'>(Ao)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.06811 0.08867 ... 0.784 0.9872</div><input id='attrs-ed09ad19-f51f-4ffc-a581-26d69b8f36d9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ed09ad19-f51f-4ffc-a581-26d69b8f36d9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d8690350-c0d1-434a-84bd-c664b5494878' class='xr-var-data-in' type='checkbox'><label for='data-d8690350-c0d1-434a-84bd-c664b5494878' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Hypoxic tolerance</dd><dt><span>units :</span></dt><dd>1/kPa</dd></dl></div><div class='xr-var-data'><pre>array([0.068106, 0.088674, 0.114712, 0.147614, 0.189177, 0.241291, 0.306919,
       0.389502, 0.492625, 0.62211 , 0.784033, 0.987234])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>Eo</span></div><div class='xr-var-dims'>(Eo)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.5 -0.3056 -0.1111 ... 1.056 1.25</div><input id='attrs-8372ccaa-c562-49a6-9680-fd26d908fed1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8372ccaa-c562-49a6-9680-fd26d908fed1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0e513d70-cf78-4fbf-b192-090c75ba5329' class='xr-var-data-in' type='checkbox'><label for='data-0e513d70-cf78-4fbf-b192-090c75ba5329' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Temperature sensitivity</dd><dt><span>units :</span></dt><dd>eV</dd></dl></div><div class='xr-var-data'><pre>array([-0.5     , -0.3056  , -0.1111  ,  0.0833  ,  0.2778  ,  0.380678,
        0.4722  ,  0.6667  ,  0.8611  ,  1.0556  ,  1.25    ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>dz</span></div><div class='xr-var-dims'>(z_t)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(10,), meta=np.ndarray&gt;</div><input id='attrs-9c803398-d6b6-40a1-a7cb-dc8efbeb9325' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9c803398-d6b6-40a1-a7cb-dc8efbeb9325' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cc7b198a-b8b0-4a37-974e-9cf5263a55ab' class='xr-var-data-in' type='checkbox'><label for='data-cc7b198a-b8b0-4a37-974e-9cf5263a55ab' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>thickness of layer k</dd><dt><span>units :</span></dt><dd>centimeters</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 160 B </td>
                        <td> 40 B </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (40,) </td>
                        <td> (10,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 27 Tasks </td>
                        <td> 4 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="80" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="30" x2="120" y2="30" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="30" style="stroke-width:2" />
  <line x1="30" y1="0" x2="30" y2="30" />
  <line x1="60" y1="0" x2="60" y2="30" />
  <line x1="90" y1="0" x2="90" y2="30" />
  <line x1="120" y1="0" x2="120" y2="30" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,30.311399683662877 0.0,30.311399683662877" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="50.311400" font-size="1.0rem" font-weight="100" text-anchor="middle" >40</text>
  <text x="140.000000" y="15.155700" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,15.155700)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-89.5 -88.5 -87.5 ... 88.5 89.5</div><input id='attrs-9fdac41c-6fd9-4724-88cb-066017024668' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9fdac41c-6fd9-4724-88cb-066017024668' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c47d7a4e-bc0b-4f77-b81f-cafb41468781' class='xr-var-data-in' type='checkbox'><label for='data-c47d7a4e-bc0b-4f77-b81f-cafb41468781' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Y</dd><dt><span>bounds :</span></dt><dd>lat_bnds</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([-89.5, -88.5, -87.5, -86.5, -85.5, -84.5, -83.5, -82.5, -81.5, -80.5,
       -79.5, -78.5, -77.5, -76.5, -75.5, -74.5, -73.5, -72.5, -71.5, -70.5,
       -69.5, -68.5, -67.5, -66.5, -65.5, -64.5, -63.5, -62.5, -61.5, -60.5,
       -59.5, -58.5, -57.5, -56.5, -55.5, -54.5, -53.5, -52.5, -51.5, -50.5,
       -49.5, -48.5, -47.5, -46.5, -45.5, -44.5, -43.5, -42.5, -41.5, -40.5,
       -39.5, -38.5, -37.5, -36.5, -35.5, -34.5, -33.5, -32.5, -31.5, -30.5,
       -29.5, -28.5, -27.5, -26.5, -25.5, -24.5, -23.5, -22.5, -21.5, -20.5,
       -19.5, -18.5, -17.5, -16.5, -15.5, -14.5, -13.5, -12.5, -11.5, -10.5,
        -9.5,  -8.5,  -7.5,  -6.5,  -5.5,  -4.5,  -3.5,  -2.5,  -1.5,  -0.5,
         0.5,   1.5,   2.5,   3.5,   4.5,   5.5,   6.5,   7.5,   8.5,   9.5,
        10.5,  11.5,  12.5,  13.5,  14.5,  15.5,  16.5,  17.5,  18.5,  19.5,
        20.5,  21.5,  22.5,  23.5,  24.5,  25.5,  26.5,  27.5,  28.5,  29.5,
        30.5,  31.5,  32.5,  33.5,  34.5,  35.5,  36.5,  37.5,  38.5,  39.5,
        40.5,  41.5,  42.5,  43.5,  44.5,  45.5,  46.5,  47.5,  48.5,  49.5,
        50.5,  51.5,  52.5,  53.5,  54.5,  55.5,  56.5,  57.5,  58.5,  59.5,
        60.5,  61.5,  62.5,  63.5,  64.5,  65.5,  66.5,  67.5,  68.5,  69.5,
        70.5,  71.5,  72.5,  73.5,  74.5,  75.5,  76.5,  77.5,  78.5,  79.5,
        80.5,  81.5,  82.5,  83.5,  84.5,  85.5,  86.5,  87.5,  88.5,  89.5],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-179.5 -178.5 ... 178.5 179.5</div><input id='attrs-45aca612-79ea-400a-9d87-e634f679440a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-45aca612-79ea-400a-9d87-e634f679440a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ef176800-3ade-40bc-9bf1-5b00485ca21f' class='xr-var-data-in' type='checkbox'><label for='data-ef176800-3ade-40bc-9bf1-5b00485ca21f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>X</dd><dt><span>bounds :</span></dt><dd>lon_bnds</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([-179.5, -178.5, -177.5, ...,  177.5,  178.5,  179.5], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>z_t</span></div><div class='xr-var-dims'>(z_t)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>500.0 1.5e+03 ... 9.847e+04</div><input id='attrs-98214bb2-76e6-4264-a90e-a1c246fe7a21' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-98214bb2-76e6-4264-a90e-a1c246fe7a21' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a376c637-1ac0-4b62-b00d-03f4de491bab' class='xr-var-data-in' type='checkbox'><label for='data-a376c637-1ac0-4b62-b00d-03f4de491bab' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Depth</dd><dt><span>positive :</span></dt><dd>down</dd><dt><span>units :</span></dt><dd>centimeters</dd><dt><span>valid_max :</span></dt><dd>537500.0</dd><dt><span>valid_min :</span></dt><dd>500.0</dd></dl></div><div class='xr-var-data'><pre>array([  500.   ,  1500.   ,  2500.   ,  3500.   ,  4500.   ,  5500.   ,
        6500.   ,  7500.   ,  8500.   ,  9500.   , 10500.   , 11500.   ,
       12500.   , 13500.   , 14500.   , 15500.   , 16509.84 , 17547.904,
       18629.127, 19766.027, 20971.139, 22257.828, 23640.883, 25137.016,
       26765.42 , 28548.365, 30511.922, 32686.799, 35109.348, 37822.76 ,
       40878.465, 44337.77 , 48273.67 , 52772.8  , 57937.29 , 63886.26 ,
       70756.33 , 78700.25 , 87882.52 , 98470.586], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ebd217f9-84e6-4e96-b655-6f974ef23c05' class='xr-section-summary-in' type='checkbox'  checked><label for='section-ebd217f9-84e6-4e96-b655-6f974ef23c05' class='xr-section-summary' >Data variables: <span>(12)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ASM_Tmax_active</span></div><div class='xr-var-dims'>(Ac, Eo, z_t, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(1, 1, 40, 180, 10), meta=np.ndarray&gt;</div><input id='attrs-b51d8ae9-ed4b-4eb5-9d5d-9e46c3175334' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b51d8ae9-ed4b-4eb5-9d5d-9e46c3175334' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c3c28db3-8b2c-4160-8099-047257d7cf24' class='xr-var-data-in' type='checkbox'><label for='data-c3c28db3-8b2c-4160-8099-047257d7cf24' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 2.55 GiB </td>
                        <td> 562.50 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (12, 11, 40, 180, 360) </td>
                        <td> (1, 1, 40, 180, 10) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 4753 Tasks </td>
                        <td> 4752 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="395" height="133" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="31" y2="0" style="stroke-width:2" />
  <line x1="0" y1="2" x2="31" y2="2" />
  <line x1="0" y1="5" x2="31" y2="5" />
  <line x1="0" y1="8" x2="31" y2="8" />
  <line x1="0" y1="10" x2="31" y2="10" />
  <line x1="0" y1="13" x2="31" y2="13" />
  <line x1="0" y1="16" x2="31" y2="16" />
  <line x1="0" y1="18" x2="31" y2="18" />
  <line x1="0" y1="21" x2="31" y2="21" />
  <line x1="0" y1="24" x2="31" y2="24" />
  <line x1="0" y1="26" x2="31" y2="26" />
  <line x1="0" y1="29" x2="31" y2="29" />
  <line x1="0" y1="32" x2="31" y2="32" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="32" style="stroke-width:2" />
  <line x1="2" y1="0" x2="2" y2="32" />
  <line x1="5" y1="0" x2="5" y2="32" />
  <line x1="8" y1="0" x2="8" y2="32" />
  <line x1="11" y1="0" x2="11" y2="32" />
  <line x1="14" y1="0" x2="14" y2="32" />
  <line x1="17" y1="0" x2="17" y2="32" />
  <line x1="20" y1="0" x2="20" y2="32" />
  <line x1="22" y1="0" x2="22" y2="32" />
  <line x1="25" y1="0" x2="25" y2="32" />
  <line x1="28" y1="0" x2="28" y2="32" />
  <line x1="31" y1="0" x2="31" y2="32" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 31.500306186451517,0.0 31.500306186451517,32.02435249410096 0.0,32.02435249410096" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="15.750153" y="52.024352" font-size="1.0rem" font-weight="100" text-anchor="middle" >11</text>
  <text x="51.500306" y="16.012176" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,51.500306,16.012176)">12</text>


  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="101" y1="60" x2="124" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="101" y2="60" style="stroke-width:2" />
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 124.04251631306393,23.042516313063924 124.04251631306393,83.04251631306393 101.0,60.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="221" y2="0" style="stroke-width:2" />
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="104" y1="0" x2="127" y2="23" />
  <line x1="107" y1="0" x2="130" y2="23" />
  <line x1="111" y1="0" x2="134" y2="23" />
  <line x1="114" y1="0" x2="137" y2="23" />
  <line x1="117" y1="0" x2="140" y2="23" />
  <line x1="121" y1="0" x2="144" y2="23" />
  <line x1="124" y1="0" x2="147" y2="23" />
  <line x1="131" y1="0" x2="154" y2="23" />
  <line x1="134" y1="0" x2="157" y2="23" />
  <line x1="137" y1="0" x2="160" y2="23" />
  <line x1="141" y1="0" x2="164" y2="23" />
  <line x1="144" y1="0" x2="167" y2="23" />
  <line x1="147" y1="0" x2="170" y2="23" />
  <line x1="151" y1="0" x2="174" y2="23" />
  <line x1="154" y1="0" x2="177" y2="23" />
  <line x1="161" y1="0" x2="184" y2="23" />
  <line x1="164" y1="0" x2="187" y2="23" />
  <line x1="167" y1="0" x2="190" y2="23" />
  <line x1="171" y1="0" x2="194" y2="23" />
  <line x1="174" y1="0" x2="197" y2="23" />
  <line x1="177" y1="0" x2="200" y2="23" />
  <line x1="181" y1="0" x2="204" y2="23" />
  <line x1="184" y1="0" x2="207" y2="23" />
  <line x1="191" y1="0" x2="214" y2="23" />
  <line x1="194" y1="0" x2="217" y2="23" />
  <line x1="197" y1="0" x2="220" y2="23" />
  <line x1="201" y1="0" x2="224" y2="23" />
  <line x1="204" y1="0" x2="227" y2="23" />
  <line x1="207" y1="0" x2="230" y2="23" />
  <line x1="211" y1="0" x2="234" y2="23" />
  <line x1="214" y1="0" x2="237" y2="23" />
  <line x1="221" y1="0" x2="244" y2="23" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 221.0,0.0 244.0425163130639,23.042516313063924 124.04251631306393,23.042516313063924" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />
  <line x1="124" y1="83" x2="244" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />
  <line x1="127" y1="23" x2="127" y2="83" />
  <line x1="130" y1="23" x2="130" y2="83" />
  <line x1="134" y1="23" x2="134" y2="83" />
  <line x1="137" y1="23" x2="137" y2="83" />
  <line x1="140" y1="23" x2="140" y2="83" />
  <line x1="144" y1="23" x2="144" y2="83" />
  <line x1="147" y1="23" x2="147" y2="83" />
  <line x1="154" y1="23" x2="154" y2="83" />
  <line x1="157" y1="23" x2="157" y2="83" />
  <line x1="160" y1="23" x2="160" y2="83" />
  <line x1="164" y1="23" x2="164" y2="83" />
  <line x1="167" y1="23" x2="167" y2="83" />
  <line x1="170" y1="23" x2="170" y2="83" />
  <line x1="174" y1="23" x2="174" y2="83" />
  <line x1="177" y1="23" x2="177" y2="83" />
  <line x1="184" y1="23" x2="184" y2="83" />
  <line x1="187" y1="23" x2="187" y2="83" />
  <line x1="190" y1="23" x2="190" y2="83" />
  <line x1="194" y1="23" x2="194" y2="83" />
  <line x1="197" y1="23" x2="197" y2="83" />
  <line x1="200" y1="23" x2="200" y2="83" />
  <line x1="204" y1="23" x2="204" y2="83" />
  <line x1="207" y1="23" x2="207" y2="83" />
  <line x1="214" y1="23" x2="214" y2="83" />
  <line x1="217" y1="23" x2="217" y2="83" />
  <line x1="220" y1="23" x2="220" y2="83" />
  <line x1="224" y1="23" x2="224" y2="83" />
  <line x1="227" y1="23" x2="227" y2="83" />
  <line x1="230" y1="23" x2="230" y2="83" />
  <line x1="234" y1="23" x2="234" y2="83" />
  <line x1="237" y1="23" x2="237" y2="83" />
  <line x1="244" y1="23" x2="244" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="124.04251631306393,23.042516313063924 244.0425163130639,23.042516313063924 244.0425163130639,83.04251631306393 124.04251631306393,83.04251631306393" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="184.042516" y="103.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" >360</text>
  <text x="264.042516" y="53.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,264.042516,53.042516)">180</text>
  <text x="102.521258" y="91.521258" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,102.521258,91.521258)">40</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ASM_Tmax_resting</span></div><div class='xr-var-dims'>(Ao, Eo, z_t, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(1, 1, 40, 180, 10), meta=np.ndarray&gt;</div><input id='attrs-7399dec3-7226-4793-95f4-bdc593aab65c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7399dec3-7226-4793-95f4-bdc593aab65c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-402729d9-9961-4d22-b3ba-f6fd52bdfd43' class='xr-var-data-in' type='checkbox'><label for='data-402729d9-9961-4d22-b3ba-f6fd52bdfd43' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 2.55 GiB </td>
                        <td> 562.50 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (12, 11, 40, 180, 360) </td>
                        <td> (1, 1, 40, 180, 10) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 4753 Tasks </td>
                        <td> 4752 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="395" height="133" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="31" y2="0" style="stroke-width:2" />
  <line x1="0" y1="2" x2="31" y2="2" />
  <line x1="0" y1="5" x2="31" y2="5" />
  <line x1="0" y1="8" x2="31" y2="8" />
  <line x1="0" y1="10" x2="31" y2="10" />
  <line x1="0" y1="13" x2="31" y2="13" />
  <line x1="0" y1="16" x2="31" y2="16" />
  <line x1="0" y1="18" x2="31" y2="18" />
  <line x1="0" y1="21" x2="31" y2="21" />
  <line x1="0" y1="24" x2="31" y2="24" />
  <line x1="0" y1="26" x2="31" y2="26" />
  <line x1="0" y1="29" x2="31" y2="29" />
  <line x1="0" y1="32" x2="31" y2="32" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="32" style="stroke-width:2" />
  <line x1="2" y1="0" x2="2" y2="32" />
  <line x1="5" y1="0" x2="5" y2="32" />
  <line x1="8" y1="0" x2="8" y2="32" />
  <line x1="11" y1="0" x2="11" y2="32" />
  <line x1="14" y1="0" x2="14" y2="32" />
  <line x1="17" y1="0" x2="17" y2="32" />
  <line x1="20" y1="0" x2="20" y2="32" />
  <line x1="22" y1="0" x2="22" y2="32" />
  <line x1="25" y1="0" x2="25" y2="32" />
  <line x1="28" y1="0" x2="28" y2="32" />
  <line x1="31" y1="0" x2="31" y2="32" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 31.500306186451517,0.0 31.500306186451517,32.02435249410096 0.0,32.02435249410096" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="15.750153" y="52.024352" font-size="1.0rem" font-weight="100" text-anchor="middle" >11</text>
  <text x="51.500306" y="16.012176" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,51.500306,16.012176)">12</text>


  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="101" y1="60" x2="124" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="101" y2="60" style="stroke-width:2" />
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 124.04251631306393,23.042516313063924 124.04251631306393,83.04251631306393 101.0,60.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="221" y2="0" style="stroke-width:2" />
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="104" y1="0" x2="127" y2="23" />
  <line x1="107" y1="0" x2="130" y2="23" />
  <line x1="111" y1="0" x2="134" y2="23" />
  <line x1="114" y1="0" x2="137" y2="23" />
  <line x1="117" y1="0" x2="140" y2="23" />
  <line x1="121" y1="0" x2="144" y2="23" />
  <line x1="124" y1="0" x2="147" y2="23" />
  <line x1="131" y1="0" x2="154" y2="23" />
  <line x1="134" y1="0" x2="157" y2="23" />
  <line x1="137" y1="0" x2="160" y2="23" />
  <line x1="141" y1="0" x2="164" y2="23" />
  <line x1="144" y1="0" x2="167" y2="23" />
  <line x1="147" y1="0" x2="170" y2="23" />
  <line x1="151" y1="0" x2="174" y2="23" />
  <line x1="154" y1="0" x2="177" y2="23" />
  <line x1="161" y1="0" x2="184" y2="23" />
  <line x1="164" y1="0" x2="187" y2="23" />
  <line x1="167" y1="0" x2="190" y2="23" />
  <line x1="171" y1="0" x2="194" y2="23" />
  <line x1="174" y1="0" x2="197" y2="23" />
  <line x1="177" y1="0" x2="200" y2="23" />
  <line x1="181" y1="0" x2="204" y2="23" />
  <line x1="184" y1="0" x2="207" y2="23" />
  <line x1="191" y1="0" x2="214" y2="23" />
  <line x1="194" y1="0" x2="217" y2="23" />
  <line x1="197" y1="0" x2="220" y2="23" />
  <line x1="201" y1="0" x2="224" y2="23" />
  <line x1="204" y1="0" x2="227" y2="23" />
  <line x1="207" y1="0" x2="230" y2="23" />
  <line x1="211" y1="0" x2="234" y2="23" />
  <line x1="214" y1="0" x2="237" y2="23" />
  <line x1="221" y1="0" x2="244" y2="23" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 221.0,0.0 244.0425163130639,23.042516313063924 124.04251631306393,23.042516313063924" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />
  <line x1="124" y1="83" x2="244" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />
  <line x1="127" y1="23" x2="127" y2="83" />
  <line x1="130" y1="23" x2="130" y2="83" />
  <line x1="134" y1="23" x2="134" y2="83" />
  <line x1="137" y1="23" x2="137" y2="83" />
  <line x1="140" y1="23" x2="140" y2="83" />
  <line x1="144" y1="23" x2="144" y2="83" />
  <line x1="147" y1="23" x2="147" y2="83" />
  <line x1="154" y1="23" x2="154" y2="83" />
  <line x1="157" y1="23" x2="157" y2="83" />
  <line x1="160" y1="23" x2="160" y2="83" />
  <line x1="164" y1="23" x2="164" y2="83" />
  <line x1="167" y1="23" x2="167" y2="83" />
  <line x1="170" y1="23" x2="170" y2="83" />
  <line x1="174" y1="23" x2="174" y2="83" />
  <line x1="177" y1="23" x2="177" y2="83" />
  <line x1="184" y1="23" x2="184" y2="83" />
  <line x1="187" y1="23" x2="187" y2="83" />
  <line x1="190" y1="23" x2="190" y2="83" />
  <line x1="194" y1="23" x2="194" y2="83" />
  <line x1="197" y1="23" x2="197" y2="83" />
  <line x1="200" y1="23" x2="200" y2="83" />
  <line x1="204" y1="23" x2="204" y2="83" />
  <line x1="207" y1="23" x2="207" y2="83" />
  <line x1="214" y1="23" x2="214" y2="83" />
  <line x1="217" y1="23" x2="217" y2="83" />
  <line x1="220" y1="23" x2="220" y2="83" />
  <line x1="224" y1="23" x2="224" y2="83" />
  <line x1="227" y1="23" x2="227" y2="83" />
  <line x1="230" y1="23" x2="230" y2="83" />
  <line x1="234" y1="23" x2="234" y2="83" />
  <line x1="237" y1="23" x2="237" y2="83" />
  <line x1="244" y1="23" x2="244" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="124.04251631306393,23.042516313063924 244.0425163130639,23.042516313063924 244.0425163130639,83.04251631306393 124.04251631306393,83.04251631306393" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="184.042516" y="103.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" >360</text>
  <text x="264.042516" y="53.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,264.042516,53.042516)">180</text>
  <text x="102.521258" y="91.521258" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,102.521258,91.521258)">40</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ATmax_active</span></div><div class='xr-var-dims'>(Ac, Eo)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(12, 11), meta=np.ndarray&gt;</div><input id='attrs-416eec20-b8ed-4d67-a41e-a2ed63ed1f2d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-416eec20-b8ed-4d67-a41e-a2ed63ed1f2d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-958c7cda-d94d-4618-8145-1ea170660021' class='xr-var-data-in' type='checkbox'><label for='data-958c7cda-d94d-4618-8145-1ea170660021' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>N_traits :</span></dt><dd>132</dd><dt><span>long_name :</span></dt><dd>AT$_{max}$ (active)</dd><dt><span>metabolic_baseline :</span></dt><dd>active</dd><dt><span>note :</span></dt><dd>computed using dEodT = 0.022</dd><dt><span>units :</span></dt><dd>°C</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.03 kiB </td>
                        <td> 1.03 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (12, 11) </td>
                        <td> (12, 11) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="160" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="110" y2="0" style="stroke-width:2" />
  <line x1="0" y1="120" x2="110" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="110" y1="0" x2="110" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 110.00000000000001,0.0 110.00000000000001,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="55.000000" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >11</text>
  <text x="130.000000" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,130.000000,60.000000)">12</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ATmax_resting</span></div><div class='xr-var-dims'>(Ao, Eo)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(12, 11), meta=np.ndarray&gt;</div><input id='attrs-f5b27fc8-427a-41d8-abc3-917c5765f2d4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f5b27fc8-427a-41d8-abc3-917c5765f2d4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b6fd9769-c159-4baf-9a76-cbe167c472d3' class='xr-var-data-in' type='checkbox'><label for='data-b6fd9769-c159-4baf-9a76-cbe167c472d3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>N_traits :</span></dt><dd>132</dd><dt><span>long_name :</span></dt><dd>AT$_{max}$ (resting)</dd><dt><span>metabolic_baseline :</span></dt><dd>resting</dd><dt><span>note :</span></dt><dd>computed using dEodT = 0.022</dd><dt><span>units :</span></dt><dd>°C</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.03 kiB </td>
                        <td> 1.03 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (12, 11) </td>
                        <td> (12, 11) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="160" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="110" y2="0" style="stroke-width:2" />
  <line x1="0" y1="120" x2="110" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="110" y1="0" x2="110" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 110.00000000000001,0.0 110.00000000000001,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="55.000000" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >11</text>
  <text x="130.000000" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,130.000000,60.000000)">12</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>Phi_active</span></div><div class='xr-var-dims'>(Ac, Eo, z_t, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(3, 3, 10, 45, 90), meta=np.ndarray&gt;</div><input id='attrs-5c656477-6a67-429d-84f9-2e2050c9e20c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5c656477-6a67-429d-84f9-2e2050c9e20c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2a3d2f3a-ba29-4685-aa8b-f72d64ae5a38' class='xr-var-data-in' type='checkbox'><label for='data-2a3d2f3a-ba29-4685-aa8b-f72d64ae5a38' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 2.55 GiB </td>
                        <td> 2.78 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (12, 11, 40, 180, 360) </td>
                        <td> (3, 3, 10, 45, 90) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 1025 Tasks </td>
                        <td> 1024 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="395" height="133" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="31" y2="0" style="stroke-width:2" />
  <line x1="0" y1="8" x2="31" y2="8" />
  <line x1="0" y1="16" x2="31" y2="16" />
  <line x1="0" y1="24" x2="31" y2="24" />
  <line x1="0" y1="32" x2="31" y2="32" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="32" style="stroke-width:2" />
  <line x1="8" y1="0" x2="8" y2="32" />
  <line x1="17" y1="0" x2="17" y2="32" />
  <line x1="25" y1="0" x2="25" y2="32" />
  <line x1="31" y1="0" x2="31" y2="32" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 31.500306186451517,0.0 31.500306186451517,32.02435249410096 0.0,32.02435249410096" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="15.750153" y="52.024352" font-size="1.0rem" font-weight="100" text-anchor="middle" >11</text>
  <text x="51.500306" y="16.012176" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,51.500306,16.012176)">12</text>


  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="101" y1="15" x2="124" y2="38" />
  <line x1="101" y1="30" x2="124" y2="53" />
  <line x1="101" y1="45" x2="124" y2="68" />
  <line x1="101" y1="60" x2="124" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="101" y2="60" style="stroke-width:2" />
  <line x1="106" y1="5" x2="106" y2="65" />
  <line x1="112" y1="11" x2="112" y2="71" />
  <line x1="118" y1="17" x2="118" y2="77" />
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 124.04251631306393,23.042516313063924 124.04251631306393,83.04251631306393 101.0,60.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="221" y2="0" style="stroke-width:2" />
  <line x1="106" y1="5" x2="226" y2="5" />
  <line x1="112" y1="11" x2="232" y2="11" />
  <line x1="118" y1="17" x2="238" y2="17" />
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="131" y1="0" x2="154" y2="23" />
  <line x1="161" y1="0" x2="184" y2="23" />
  <line x1="191" y1="0" x2="214" y2="23" />
  <line x1="221" y1="0" x2="244" y2="23" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 221.0,0.0 244.0425163130639,23.042516313063924 124.04251631306393,23.042516313063924" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />
  <line x1="124" y1="38" x2="244" y2="38" />
  <line x1="124" y1="53" x2="244" y2="53" />
  <line x1="124" y1="68" x2="244" y2="68" />
  <line x1="124" y1="83" x2="244" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />
  <line x1="154" y1="23" x2="154" y2="83" />
  <line x1="184" y1="23" x2="184" y2="83" />
  <line x1="214" y1="23" x2="214" y2="83" />
  <line x1="244" y1="23" x2="244" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="124.04251631306393,23.042516313063924 244.0425163130639,23.042516313063924 244.0425163130639,83.04251631306393 124.04251631306393,83.04251631306393" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="184.042516" y="103.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" >360</text>
  <text x="264.042516" y="53.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,264.042516,53.042516)">180</text>
  <text x="102.521258" y="91.521258" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,102.521258,91.521258)">40</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>Phi_resting</span></div><div class='xr-var-dims'>(Ao, Eo, z_t, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(3, 3, 10, 45, 90), meta=np.ndarray&gt;</div><input id='attrs-b59ddbce-86aa-42f3-a0ce-46cf49f743d0' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b59ddbce-86aa-42f3-a0ce-46cf49f743d0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9879f35d-513d-4083-9c5a-58074a225721' class='xr-var-data-in' type='checkbox'><label for='data-9879f35d-513d-4083-9c5a-58074a225721' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 2.55 GiB </td>
                        <td> 2.78 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (12, 11, 40, 180, 360) </td>
                        <td> (3, 3, 10, 45, 90) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 1025 Tasks </td>
                        <td> 1024 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="395" height="133" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="31" y2="0" style="stroke-width:2" />
  <line x1="0" y1="8" x2="31" y2="8" />
  <line x1="0" y1="16" x2="31" y2="16" />
  <line x1="0" y1="24" x2="31" y2="24" />
  <line x1="0" y1="32" x2="31" y2="32" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="32" style="stroke-width:2" />
  <line x1="8" y1="0" x2="8" y2="32" />
  <line x1="17" y1="0" x2="17" y2="32" />
  <line x1="25" y1="0" x2="25" y2="32" />
  <line x1="31" y1="0" x2="31" y2="32" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 31.500306186451517,0.0 31.500306186451517,32.02435249410096 0.0,32.02435249410096" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="15.750153" y="52.024352" font-size="1.0rem" font-weight="100" text-anchor="middle" >11</text>
  <text x="51.500306" y="16.012176" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,51.500306,16.012176)">12</text>


  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="101" y1="15" x2="124" y2="38" />
  <line x1="101" y1="30" x2="124" y2="53" />
  <line x1="101" y1="45" x2="124" y2="68" />
  <line x1="101" y1="60" x2="124" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="101" y2="60" style="stroke-width:2" />
  <line x1="106" y1="5" x2="106" y2="65" />
  <line x1="112" y1="11" x2="112" y2="71" />
  <line x1="118" y1="17" x2="118" y2="77" />
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 124.04251631306393,23.042516313063924 124.04251631306393,83.04251631306393 101.0,60.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="221" y2="0" style="stroke-width:2" />
  <line x1="106" y1="5" x2="226" y2="5" />
  <line x1="112" y1="11" x2="232" y2="11" />
  <line x1="118" y1="17" x2="238" y2="17" />
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="131" y1="0" x2="154" y2="23" />
  <line x1="161" y1="0" x2="184" y2="23" />
  <line x1="191" y1="0" x2="214" y2="23" />
  <line x1="221" y1="0" x2="244" y2="23" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 221.0,0.0 244.0425163130639,23.042516313063924 124.04251631306393,23.042516313063924" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />
  <line x1="124" y1="38" x2="244" y2="38" />
  <line x1="124" y1="53" x2="244" y2="53" />
  <line x1="124" y1="68" x2="244" y2="68" />
  <line x1="124" y1="83" x2="244" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />
  <line x1="154" y1="23" x2="154" y2="83" />
  <line x1="184" y1="23" x2="184" y2="83" />
  <line x1="214" y1="23" x2="214" y2="83" />
  <line x1="244" y1="23" x2="244" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="124.04251631306393,23.042516313063924 244.0425163130639,23.042516313063924 244.0425163130639,83.04251631306393 124.04251631306393,83.04251631306393" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="184.042516" y="103.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" >360</text>
  <text x="264.042516" y="53.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,264.042516,53.042516)">180</text>
  <text x="102.521258" y="91.521258" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,102.521258,91.521258)">40</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>area</span></div><div class='xr-var-dims'>(lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(90, 360), meta=np.ndarray&gt;</div><input id='attrs-fdaa8c21-f095-47bf-9675-6195e187ee6a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-fdaa8c21-f095-47bf-9675-6195e187ee6a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-90f6a87d-d5aa-4a91-bb21-62260041ce89' class='xr-var-data-in' type='checkbox'><label for='data-90f6a87d-d5aa-4a91-bb21-62260041ce89' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>area</dd><dt><span>units :</span></dt><dd>m^2</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 506.25 kiB </td>
                        <td> 253.12 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (180, 360) </td>
                        <td> (90, 360) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 3 Tasks </td>
                        <td> 2 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="110" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="30" x2="120" y2="30" />
  <line x1="0" y1="60" x2="120" y2="60" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="60" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="60" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,60.0 0.0,60.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="80.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >360</text>
  <text x="140.000000" y="30.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,140.000000,30.000000)">180</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>trait_spc_active</span></div><div class='xr-var-dims'>(Ac, Eo)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(12, 11), meta=np.ndarray&gt;</div><input id='attrs-b91013f3-9fb0-4596-b0e9-66895094cf1b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b91013f3-9fb0-4596-b0e9-66895094cf1b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f1042919-c3dd-44a7-90c1-32470965b391' class='xr-var-data-in' type='checkbox'><label for='data-f1042919-c3dd-44a7-90c1-32470965b391' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>N_traits :</span></dt><dd>132</dd><dt><span>long_name :</span></dt><dd>Trait density (active)</dd><dt><span>metabolic_baseline :</span></dt><dd>active</dd><dt><span>units :</span></dt><dd>eV 1/kPa</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.03 kiB </td>
                        <td> 1.03 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (12, 11) </td>
                        <td> (12, 11) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="160" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="110" y2="0" style="stroke-width:2" />
  <line x1="0" y1="120" x2="110" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="110" y1="0" x2="110" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 110.00000000000001,0.0 110.00000000000001,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="55.000000" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >11</text>
  <text x="130.000000" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,130.000000,60.000000)">12</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>trait_spc_resting</span></div><div class='xr-var-dims'>(Ao, Eo)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(12, 11), meta=np.ndarray&gt;</div><input id='attrs-4db5e0ea-d70d-423e-b7c4-b218b0a85c87' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4db5e0ea-d70d-423e-b7c4-b218b0a85c87' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f49056be-3a16-44ad-8200-405dced0d9cd' class='xr-var-data-in' type='checkbox'><label for='data-f49056be-3a16-44ad-8200-405dced0d9cd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>N_traits :</span></dt><dd>132</dd><dt><span>long_name :</span></dt><dd>Trait density (resting)</dd><dt><span>metabolic_baseline :</span></dt><dd>resting</dd><dt><span>units :</span></dt><dd>eV 1/kPa</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.03 kiB </td>
                        <td> 1.03 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (12, 11) </td>
                        <td> (12, 11) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="160" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="110" y2="0" style="stroke-width:2" />
  <line x1="0" y1="120" x2="110" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="110" y1="0" x2="110" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 110.00000000000001,0.0 110.00000000000001,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="55.000000" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >11</text>
  <text x="130.000000" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,130.000000,60.000000)">12</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>viability_active</span></div><div class='xr-var-dims'>(Ac, Eo, z_t, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(3, 3, 10, 45, 90), meta=np.ndarray&gt;</div><input id='attrs-79d2b7f8-6f2a-4387-8108-10a8586ec146' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-79d2b7f8-6f2a-4387-8108-10a8586ec146' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d5841efd-1f60-4f00-9ac8-f4da6ad41345' class='xr-var-data-in' type='checkbox'><label for='data-d5841efd-1f60-4f00-9ac8-f4da6ad41345' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>viability based on $\Phi$ criterion</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 2.55 GiB </td>
                        <td> 2.78 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (12, 11, 40, 180, 360) </td>
                        <td> (3, 3, 10, 45, 90) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 1025 Tasks </td>
                        <td> 1024 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="395" height="133" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="31" y2="0" style="stroke-width:2" />
  <line x1="0" y1="8" x2="31" y2="8" />
  <line x1="0" y1="16" x2="31" y2="16" />
  <line x1="0" y1="24" x2="31" y2="24" />
  <line x1="0" y1="32" x2="31" y2="32" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="32" style="stroke-width:2" />
  <line x1="8" y1="0" x2="8" y2="32" />
  <line x1="17" y1="0" x2="17" y2="32" />
  <line x1="25" y1="0" x2="25" y2="32" />
  <line x1="31" y1="0" x2="31" y2="32" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 31.500306186451517,0.0 31.500306186451517,32.02435249410096 0.0,32.02435249410096" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="15.750153" y="52.024352" font-size="1.0rem" font-weight="100" text-anchor="middle" >11</text>
  <text x="51.500306" y="16.012176" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,51.500306,16.012176)">12</text>


  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="101" y1="15" x2="124" y2="38" />
  <line x1="101" y1="30" x2="124" y2="53" />
  <line x1="101" y1="45" x2="124" y2="68" />
  <line x1="101" y1="60" x2="124" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="101" y2="60" style="stroke-width:2" />
  <line x1="106" y1="5" x2="106" y2="65" />
  <line x1="112" y1="11" x2="112" y2="71" />
  <line x1="118" y1="17" x2="118" y2="77" />
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 124.04251631306393,23.042516313063924 124.04251631306393,83.04251631306393 101.0,60.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="221" y2="0" style="stroke-width:2" />
  <line x1="106" y1="5" x2="226" y2="5" />
  <line x1="112" y1="11" x2="232" y2="11" />
  <line x1="118" y1="17" x2="238" y2="17" />
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="131" y1="0" x2="154" y2="23" />
  <line x1="161" y1="0" x2="184" y2="23" />
  <line x1="191" y1="0" x2="214" y2="23" />
  <line x1="221" y1="0" x2="244" y2="23" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 221.0,0.0 244.0425163130639,23.042516313063924 124.04251631306393,23.042516313063924" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />
  <line x1="124" y1="38" x2="244" y2="38" />
  <line x1="124" y1="53" x2="244" y2="53" />
  <line x1="124" y1="68" x2="244" y2="68" />
  <line x1="124" y1="83" x2="244" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />
  <line x1="154" y1="23" x2="154" y2="83" />
  <line x1="184" y1="23" x2="184" y2="83" />
  <line x1="214" y1="23" x2="214" y2="83" />
  <line x1="244" y1="23" x2="244" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="124.04251631306393,23.042516313063924 244.0425163130639,23.042516313063924 244.0425163130639,83.04251631306393 124.04251631306393,83.04251631306393" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="184.042516" y="103.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" >360</text>
  <text x="264.042516" y="53.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,264.042516,53.042516)">180</text>
  <text x="102.521258" y="91.521258" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,102.521258,91.521258)">40</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>viability_resting</span></div><div class='xr-var-dims'>(Ao, Eo, z_t, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(3, 3, 10, 45, 90), meta=np.ndarray&gt;</div><input id='attrs-454ec908-1d61-493d-ac66-903a73aeb4ff' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-454ec908-1d61-493d-ac66-903a73aeb4ff' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-77de7266-ac5d-4a85-812f-bcc4c1b1d589' class='xr-var-data-in' type='checkbox'><label for='data-77de7266-ac5d-4a85-812f-bcc4c1b1d589' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>viability based on $\Phi$ criterion</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 2.55 GiB </td>
                        <td> 2.78 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (12, 11, 40, 180, 360) </td>
                        <td> (3, 3, 10, 45, 90) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 1025 Tasks </td>
                        <td> 1024 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="395" height="133" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="31" y2="0" style="stroke-width:2" />
  <line x1="0" y1="8" x2="31" y2="8" />
  <line x1="0" y1="16" x2="31" y2="16" />
  <line x1="0" y1="24" x2="31" y2="24" />
  <line x1="0" y1="32" x2="31" y2="32" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="32" style="stroke-width:2" />
  <line x1="8" y1="0" x2="8" y2="32" />
  <line x1="17" y1="0" x2="17" y2="32" />
  <line x1="25" y1="0" x2="25" y2="32" />
  <line x1="31" y1="0" x2="31" y2="32" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 31.500306186451517,0.0 31.500306186451517,32.02435249410096 0.0,32.02435249410096" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="15.750153" y="52.024352" font-size="1.0rem" font-weight="100" text-anchor="middle" >11</text>
  <text x="51.500306" y="16.012176" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,51.500306,16.012176)">12</text>


  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="101" y1="15" x2="124" y2="38" />
  <line x1="101" y1="30" x2="124" y2="53" />
  <line x1="101" y1="45" x2="124" y2="68" />
  <line x1="101" y1="60" x2="124" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="101" y2="60" style="stroke-width:2" />
  <line x1="106" y1="5" x2="106" y2="65" />
  <line x1="112" y1="11" x2="112" y2="71" />
  <line x1="118" y1="17" x2="118" y2="77" />
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 124.04251631306393,23.042516313063924 124.04251631306393,83.04251631306393 101.0,60.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="101" y1="0" x2="221" y2="0" style="stroke-width:2" />
  <line x1="106" y1="5" x2="226" y2="5" />
  <line x1="112" y1="11" x2="232" y2="11" />
  <line x1="118" y1="17" x2="238" y2="17" />
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="101" y1="0" x2="124" y2="23" style="stroke-width:2" />
  <line x1="131" y1="0" x2="154" y2="23" />
  <line x1="161" y1="0" x2="184" y2="23" />
  <line x1="191" y1="0" x2="214" y2="23" />
  <line x1="221" y1="0" x2="244" y2="23" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="101.0,0.0 221.0,0.0 244.0425163130639,23.042516313063924 124.04251631306393,23.042516313063924" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="124" y1="23" x2="244" y2="23" style="stroke-width:2" />
  <line x1="124" y1="38" x2="244" y2="38" />
  <line x1="124" y1="53" x2="244" y2="53" />
  <line x1="124" y1="68" x2="244" y2="68" />
  <line x1="124" y1="83" x2="244" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="124" y1="23" x2="124" y2="83" style="stroke-width:2" />
  <line x1="154" y1="23" x2="154" y2="83" />
  <line x1="184" y1="23" x2="184" y2="83" />
  <line x1="214" y1="23" x2="214" y2="83" />
  <line x1="244" y1="23" x2="244" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="124.04251631306393,23.042516313063924 244.0425163130639,23.042516313063924 244.0425163130639,83.04251631306393 124.04251631306393,83.04251631306393" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="184.042516" y="103.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" >360</text>
  <text x="264.042516" y="53.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,264.042516,53.042516)">180</text>
  <text x="102.521258" y="91.521258" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,102.521258,91.521258)">40</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>vol</span></div><div class='xr-var-dims'>(z_t, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(10, 90, 360), meta=np.ndarray&gt;</div><input id='attrs-2a217f23-a937-4348-ba4c-22a135036a42' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2a217f23-a937-4348-ba4c-22a135036a42' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bcfcd3b9-0050-49cc-8fa9-151a1d48c3df' class='xr-var-data-in' type='checkbox'><label for='data-bcfcd3b9-0050-49cc-8fa9-151a1d48c3df' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 19.78 MiB </td>
                        <td> 2.47 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (40, 180, 360) </td>
                        <td> (10, 90, 360) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 48 Tasks </td>
                        <td> 8 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="203" height="133" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="33" y2="23" style="stroke-width:2" />
  <line x1="10" y1="30" x2="33" y2="53" />
  <line x1="10" y1="60" x2="33" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="60" style="stroke-width:2" />
  <line x1="15" y1="5" x2="15" y2="65" />
  <line x1="21" y1="11" x2="21" y2="71" />
  <line x1="27" y1="17" x2="27" y2="77" />
  <line x1="33" y1="23" x2="33" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 33.04251631306393,23.042516313063924 33.04251631306393,83.04251631306393 10.0,60.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="130" y2="0" style="stroke-width:2" />
  <line x1="15" y1="5" x2="135" y2="5" />
  <line x1="21" y1="11" x2="141" y2="11" />
  <line x1="27" y1="17" x2="147" y2="17" />
  <line x1="33" y1="23" x2="153" y2="23" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="33" y2="23" style="stroke-width:2" />
  <line x1="130" y1="0" x2="153" y2="23" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 130.0,0.0 153.0425163130639,23.042516313063924 33.04251631306393,23.042516313063924" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="33" y1="23" x2="153" y2="23" style="stroke-width:2" />
  <line x1="33" y1="53" x2="153" y2="53" />
  <line x1="33" y1="83" x2="153" y2="83" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="33" y1="23" x2="33" y2="83" style="stroke-width:2" />
  <line x1="153" y1="23" x2="153" y2="83" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="33.04251631306393,23.042516313063924 153.0425163130639,23.042516313063924 153.0425163130639,83.04251631306393 33.04251631306393,83.04251631306393" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="93.042516" y="103.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" >360</text>
  <text x="173.042516" y="53.042516" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,173.042516,53.042516)">180</text>
  <text x="11.521258" y="91.521258" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,11.521258,91.521258)">40</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-3b1d8088-fd01-4f4c-9cfd-45859701941d' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-3b1d8088-fd01-4f4c-9cfd-45859701941d' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="n">dsets</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">cesm1x1</span><span class="o">=</span><span class="n">ds_asm</span><span class="o">.</span><span class="n">chunk</span><span class="p">({</span><span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}),</span>
    <span class="n">woa2018</span><span class="o">=</span><span class="n">ds_obs</span><span class="p">,</span>  <span class="c1"># .chunk({&#39;lat&#39;: 1}),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 18.9 s, sys: 490 ms, total: 19.4 s
Wall time: 20.6 s
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="compute-trait-frequency-fields">
<h1>Compute trait frequency fields<a class="headerlink" href="#compute-trait-frequency-fields" title="Permalink to this headline">#</a></h1>
<ul class="simple">
<li><p>Broadcast the trait-frequency distribution to geographic space using the viability mask (e.g., <code class="docutils literal notranslate"><span class="pre">via_Phi_active</span></code>, <code class="docutils literal notranslate"><span class="pre">via_Phi_resting</span></code>, etc.).</p></li>
<li><p>Broadcast <code class="docutils literal notranslate"><span class="pre">ATmax</span></code> (which is purely a function of traits) into geographic space the <code class="docutils literal notranslate"><span class="pre">.where</span></code> operations implicitly adds the depth, latitude, and longitude dimensions add fills in NaNs where the particular trait combination is not viable.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">dsets</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

    <span class="n">zdim</span> <span class="o">=</span> <span class="s1">&#39;z_t&#39;</span> <span class="k">if</span> <span class="s1">&#39;z_t&#39;</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">dims</span> <span class="k">else</span> <span class="s1">&#39;depth&#39;</span>

    <span class="c1"># construct a volume weight that sums to 1 over each latitude band</span>
    <span class="n">vol_wgts</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">vol</span> <span class="o">/</span> <span class="n">ds</span><span class="o">.</span><span class="n">vol</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">zdim</span><span class="p">])</span>

    <span class="k">for</span> <span class="n">baseline</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;resting&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">]:</span>

        <span class="c1"># ensure that the trait frequency distribution is normalized to 1</span>
        <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_almost_equal</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;trait_spc_</span><span class="si">{</span><span class="n">baseline</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">xr</span><span class="o">.</span><span class="n">ALL_DIMS</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="c1"># compute a trait frequency field:</span>
        <span class="c1"># - set to trait occurence frequency where traits are viable</span>
        <span class="n">via_mask</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;viability_</span><span class="si">{</span><span class="n">baseline</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="n">tw</span> <span class="o">=</span> <span class="n">via_mask</span> <span class="o">*</span> <span class="n">ds</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;trait_spc_</span><span class="si">{</span><span class="n">baseline</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="n">ds</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;TW_</span><span class="si">{</span><span class="n">baseline</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tw</span>  <span class="c1"># Should I add this here: * vol_wgts?</span>
        <span class="n">ds</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;ATmax_</span><span class="si">{</span><span class="n">baseline</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;ATmax_</span><span class="si">{</span><span class="n">baseline</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">via_mask</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;Ac_viable&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">Ac</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">viability_active</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;Eo_viable&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">Ac</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">viability_active</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">)</span>

<span class="n">dsets</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 2.54 s, sys: 2.52 s, total: 5.06 s
Wall time: 5.89 s
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;cesm1x1&#39;: &lt;xarray.Dataset&gt;
 Dimensions:            (Ac: 12, Eo: 11, z_t: 40, lat: 180, lon: 360, Ao: 12)
 Coordinates:
   * Ac                 (Ac) float64 0.03 0.037 0.0456 ... 0.1974 0.2433 0.3
   * Ao                 (Ao) float64 0.06811 0.08867 0.1147 ... 0.784 0.9872
   * Eo                 (Eo) float64 -0.5 -0.3056 -0.1111 ... 0.8611 1.056 1.25
     dz                 (z_t) float32 dask.array&lt;chunksize=(10,), meta=np.ndarray&gt;
   * lat                (lat) float32 -89.5 -88.5 -87.5 -86.5 ... 87.5 88.5 89.5
   * lon                (lon) float32 -179.5 -178.5 -177.5 ... 177.5 178.5 179.5
   * z_t                (z_t) float32 500.0 1.5e+03 ... 8.788e+04 9.847e+04
 Data variables: (12/14)
     ASM_Tmax_active    (Ac, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(1, 1, 40, 1, 10), meta=np.ndarray&gt;
     ASM_Tmax_resting   (Ao, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(1, 1, 40, 1, 10), meta=np.ndarray&gt;
     ATmax_active       (Ac, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 1, 90), meta=np.ndarray&gt;
     ATmax_resting      (Ao, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 1, 90), meta=np.ndarray&gt;
     Phi_active         (Ac, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 1, 90), meta=np.ndarray&gt;
     Phi_resting        (Ao, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 1, 90), meta=np.ndarray&gt;
     ...                 ...
     trait_spc_resting  (Ao, Eo) float64 dask.array&lt;chunksize=(12, 11), meta=np.ndarray&gt;
     viability_active   (Ac, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 1, 90), meta=np.ndarray&gt;
     viability_resting  (Ao, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 1, 90), meta=np.ndarray&gt;
     vol                (z_t, lat, lon) float64 dask.array&lt;chunksize=(10, 1, 360), meta=np.ndarray&gt;
     TW_resting         (Ao, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 1, 90), meta=np.ndarray&gt;
     TW_active          (Ac, Eo, z_t, lat, lon) float64 dask.array&lt;chunksize=(3, 3, 10, 1, 90), meta=np.ndarray&gt;,
 &#39;woa2018&#39;: &lt;xarray.Dataset&gt;
 Dimensions:            (Ac: 12, Eo: 11, depth: 47, lat: 180, lon: 360, Ao: 12)
 Coordinates:
   * Ac                 (Ac) float64 0.03 0.037 0.0456 ... 0.1974 0.2433 0.3
   * Ao                 (Ao) float64 0.06811 0.08867 0.1147 ... 0.784 0.9872
   * Eo                 (Eo) float64 -0.5 -0.3056 -0.1111 ... 0.8611 1.056 1.25
   * depth              (depth) float32 0.0 5.0 10.0 15.0 ... 900.0 950.0 1e+03
   * lat                (lat) float32 -89.5 -88.5 -87.5 -86.5 ... 87.5 88.5 89.5
   * lon                (lon) float32 -179.5 -178.5 -177.5 ... 177.5 178.5 179.5
 Data variables: (12/13)
     ATmax_active       (Ac, Eo, depth, lat, lon) float64 nan nan nan ... nan nan
     ATmax_resting      (Ao, Eo, depth, lat, lon) float64 nan nan nan ... nan nan
     Phi_active         (Ac, Eo, depth, lat, lon) float64 nan nan ... 49.65 49.65
     Phi_resting        (Ao, Eo, depth, lat, lon) float64 nan nan ... 163.4 163.4
     area               (lat, lon) float64 1.079e+08 1.079e+08 ... 1.079e+08
     dz                 (depth) float32 2.5 5.0 5.0 5.0 ... 50.0 50.0 50.0 50.0
     ...                 ...
     trait_spc_resting  (Ao, Eo) float64 0.0001098 0.0007361 ... 5.384e-06
     viability_active   (Ac, Eo, depth, lat, lon) float64 0.0 0.0 0.0 ... 0.0 0.0
     viability_resting  (Ao, Eo, depth, lat, lon) float64 0.0 0.0 0.0 ... 0.0 0.0
     vol                (depth, lat, lon) float64 2.697e+08 ... 5.395e+09
     TW_resting         (Ao, Eo, depth, lat, lon) float64 0.0 0.0 0.0 ... 0.0 0.0
     TW_active          (Ac, Eo, depth, lat, lon) float64 0.0 0.0 0.0 ... 0.0 0.0}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">field</span> <span class="o">=</span> <span class="s1">&#39;TW_resting&#39;</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">dsets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

    <span class="n">Eo</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">Eo</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">Eo</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">Eo</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">))</span>
    <span class="n">Ao</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">Ao</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">Ao</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">Ao</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">))</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Ao</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">Eo</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Ao</span><span class="p">)),</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Eo</span><span class="p">))):</span>
        <span class="n">ds</span><span class="p">[</span><span class="n">field</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">Eo</span><span class="o">=</span><span class="n">Eo</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">Ao</span><span class="o">=</span><span class="n">Ao</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s1">&#39;lon&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">yincrease</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/compute-zonal-safety-margin-metrics_13_0.png" src="_images/compute-zonal-safety-margin-metrics_13_0.png" />
<img alt="_images/compute-zonal-safety-margin-metrics_13_1.png" src="_images/compute-zonal-safety-margin-metrics_13_1.png" />
</div>
</div>
</section>
<section id="compute-zonal-distribution-of-trait-weighted-safety-margins">
<h1>Compute zonal distribution of trait-weighted safety margins<a class="headerlink" href="#compute-zonal-distribution-of-trait-weighted-safety-margins" title="Permalink to this headline">#</a></h1>
<p>Set up temperature bins into which to aggregation trait-frequency.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Tmax_bin_edge</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Tmax_bin_c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">Tmax_bin_edge</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">Tmax_bin_edge</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Tmax_bins</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span>
    <span class="n">Tmax_bin_c</span><span class="p">,</span>
    <span class="n">dims</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Tmax&#39;</span><span class="p">),</span>
    <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Tmax&#39;</span><span class="p">:</span> <span class="n">Tmax_bin_c</span><span class="p">},</span>
<span class="p">)</span>
<span class="n">Tmax_bins</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (Tmax: 31)&gt;
array([ 1.,  3.,  5.,  7.,  9., 11., 13., 15., 17., 19., 21., 23., 25.,
       27., 29., 31., 33., 35., 37., 39., 41., 43., 45., 47., 49., 51.,
       53., 55., 57., 59., 61.])
Coordinates:
  * Tmax     (Tmax) float64 1.0 3.0 5.0 7.0 9.0 ... 53.0 55.0 57.0 59.0 61.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>Tmax</span>: 31</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-f8e521c0-f368-40f9-8548-68d00917ec7f' class='xr-array-in' type='checkbox' checked><label for='section-f8e521c0-f368-40f9-8548-68d00917ec7f' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>1.0 3.0 5.0 7.0 9.0 11.0 13.0 ... 49.0 51.0 53.0 55.0 57.0 59.0 61.0</span></div><div class='xr-array-data'><pre>array([ 1.,  3.,  5.,  7.,  9., 11., 13., 15., 17., 19., 21., 23., 25.,
       27., 29., 31., 33., 35., 37., 39., 41., 43., 45., 47., 49., 51.,
       53., 55., 57., 59., 61.])</pre></div></div></li><li class='xr-section-item'><input id='section-233ca34d-4182-455d-98e1-82106eefc962' class='xr-section-summary-in' type='checkbox'  checked><label for='section-233ca34d-4182-455d-98e1-82106eefc962' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>Tmax</span></div><div class='xr-var-dims'>(Tmax)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 3.0 5.0 7.0 ... 57.0 59.0 61.0</div><input id='attrs-56a32ef2-653f-47fb-8d35-a32d991e3975' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-56a32ef2-653f-47fb-8d35-a32d991e3975' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0962f373-3604-4453-9675-5ec366fc8555' class='xr-var-data-in' type='checkbox'><label for='data-0962f373-3604-4453-9675-5ec366fc8555' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 1.,  3.,  5.,  7.,  9., 11., 13., 15., 17., 19., 21., 23., 25., 27.,
       29., 31., 33., 35., 37., 39., 41., 43., 45., 47., 49., 51., 53., 55.,
       57., 59., 61.])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-903d5891-2b97-4429-a893-bfb1d90144d9' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-903d5891-2b97-4429-a893-bfb1d90144d9' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<p>Scatter datasets</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="n">dsets_fut</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ds</span><span class="o">.</span><span class="n">chunk</span><span class="p">({</span><span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span><span class="o">.</span><span class="n">persist</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">dsets</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 5min 21s, sys: 13.8 s, total: 5min 35s
Wall time: 5min 46s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>


<span class="nd">@dask</span><span class="o">.</span><span class="n">delayed</span>
<span class="k">def</span> <span class="nf">groupby_bins</span><span class="p">(</span><span class="n">ds_j</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">wgt_var</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;bin data&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">ds_j</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">Tmax_bins</span><span class="p">)))</span> <span class="o">*</span> <span class="mf">0.0</span><span class="p">,</span>  <span class="c1"># np.nan,</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="s2">&quot;Tmax&quot;</span><span class="p">),</span>
            <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Tmax&quot;</span><span class="p">:</span> <span class="n">Tmax_bins</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="n">ds_j</span><span class="o">.</span><span class="n">lat</span><span class="p">)]},</span>
        <span class="p">)</span>

    <span class="n">g_sum</span> <span class="o">=</span> <span class="n">ds_j</span><span class="o">.</span><span class="n">groupby_bins</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Tmax_bin_edge</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">xr</span><span class="o">.</span><span class="n">ALL_DIMS</span><span class="p">)</span>
    <span class="n">da_out</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">g_sum</span><span class="p">[</span><span class="n">wgt_var</span><span class="p">]</span>
        <span class="o">.</span><span class="n">expand_dims</span><span class="p">({</span><span class="s2">&quot;lat&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="n">ds_j</span><span class="o">.</span><span class="n">lat</span><span class="p">)]})</span>
        <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_bins&quot;</span><span class="p">:</span> <span class="s2">&quot;Tmax&quot;</span><span class="p">})</span>
        <span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="s2">&quot;Tmax&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">da_out</span><span class="p">[</span><span class="s2">&quot;Tmax&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tmax_bins</span>
    <span class="k">return</span> <span class="n">da_out</span>


<span class="n">Tmax_metrics_trait_wgt</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">ATmax_resting</span><span class="o">=</span><span class="s1">&#39;TW_resting&#39;</span><span class="p">,</span>
    <span class="n">ATmax_active</span><span class="o">=</span><span class="s1">&#39;TW_active&#39;</span><span class="p">,</span>
    <span class="n">ASM_Tmax_active</span><span class="o">=</span><span class="s1">&#39;TW_active&#39;</span><span class="p">,</span>
    <span class="n">ATmax_resting_viaATmax</span><span class="o">=</span><span class="s1">&#39;TW_resting&#39;</span><span class="p">,</span>
    <span class="n">Ac_viable</span><span class="o">=</span><span class="s1">&#39;TW_active&#39;</span><span class="p">,</span>
    <span class="n">Eo_viable</span><span class="o">=</span><span class="s1">&#39;TW_active&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">dsets_out</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">dsets_fut</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

    <span class="n">dsets_out</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

    <span class="n">objs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">Tmax_metric_var</span><span class="p">,</span> <span class="n">trait_wgt_var</span> <span class="ow">in</span> <span class="n">Tmax_metrics_trait_wgt</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">if</span> <span class="s1">&#39;woa&#39;</span> <span class="ow">in</span> <span class="n">key</span> <span class="ow">and</span> <span class="s1">&#39;ASM&#39;</span> <span class="ow">in</span> <span class="n">Tmax_metric_var</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">objs</span><span class="p">[</span><span class="n">Tmax_metric_var</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">groupby_bins</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">j</span><span class="p">),</span> <span class="n">Tmax_metric_var</span><span class="p">,</span> <span class="n">trait_wgt_var</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">sizes</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">])</span>
        <span class="p">]</span>

    <span class="k">for</span> <span class="n">Tmax_metric_var</span> <span class="ow">in</span> <span class="n">objs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">dsets_out</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">Tmax_metric_var</span><span class="p">]</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dask</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="o">*</span><span class="n">objs</span><span class="p">[</span><span class="n">Tmax_metric_var</span><span class="p">]),</span> <span class="n">dim</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">)</span>

<span class="n">dsets_out</span><span class="p">[</span><span class="s1">&#39;woa2018&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>distributed.scheduler - ERROR - Error transitioning &quot;(&#39;where-7a32c57d4665113c2c31e0f12941eb44&#39;, 0, 1, 2, 76, 3)&quot; from &#39;erred&#39; to &#39;memory&#39;
Traceback (most recent call last):
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/scheduler.py&quot;, line 2280, in _transition
    assert not args and not kwargs, (args, kwargs, start_finish)
AssertionError: ((), {&#39;worker&#39;: &#39;tcp://10.12.206.38:35224&#39;, &#39;nbytes&#39;: 64800, &#39;typename&#39;: &#39;numpy.ndarray&#39;}, (&#39;erred&#39;, &#39;memory&#39;))
distributed.utils - ERROR - ((), {&#39;worker&#39;: &#39;tcp://10.12.206.38:35224&#39;, &#39;nbytes&#39;: 64800, &#39;typename&#39;: &#39;numpy.ndarray&#39;}, (&#39;erred&#39;, &#39;memory&#39;))
Traceback (most recent call last):
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/utils.py&quot;, line 680, in log_errors
    yield
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/scheduler.py&quot;, line 4455, in add_worker
    typename=types[key],
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/scheduler.py&quot;, line 2280, in _transition
    assert not args and not kwargs, (args, kwargs, start_finish)
AssertionError: ((), {&#39;worker&#39;: &#39;tcp://10.12.206.38:35224&#39;, &#39;nbytes&#39;: 64800, &#39;typename&#39;: &#39;numpy.ndarray&#39;}, (&#39;erred&#39;, &#39;memory&#39;))
distributed.core - ERROR - Exception while handling op register-worker
Traceback (most recent call last):
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/core.py&quot;, line 520, in handle_comm
    result = await result
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/scheduler.py&quot;, line 4455, in add_worker
    typename=types[key],
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/scheduler.py&quot;, line 2280, in _transition
    assert not args and not kwargs, (args, kwargs, start_finish)
AssertionError: ((), {&#39;worker&#39;: &#39;tcp://10.12.206.38:35224&#39;, &#39;nbytes&#39;: 64800, &#39;typename&#39;: &#39;numpy.ndarray&#39;}, (&#39;erred&#39;, &#39;memory&#39;))
distributed.scheduler - ERROR - Error transitioning &quot;(&#39;mul-1c6d39f855f35b74df1d3862b0986b03&#39;, 1, 1, 3, 136, 3)&quot; from &#39;erred&#39; to &#39;memory&#39;
Traceback (most recent call last):
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/scheduler.py&quot;, line 2280, in _transition
    assert not args and not kwargs, (args, kwargs, start_finish)
AssertionError: ((), {&#39;worker&#39;: &#39;tcp://10.12.206.38:43525&#39;, &#39;nbytes&#39;: 64800, &#39;typename&#39;: &#39;numpy.ndarray&#39;}, (&#39;erred&#39;, &#39;memory&#39;))
distributed.utils - ERROR - ((), {&#39;worker&#39;: &#39;tcp://10.12.206.38:43525&#39;, &#39;nbytes&#39;: 64800, &#39;typename&#39;: &#39;numpy.ndarray&#39;}, (&#39;erred&#39;, &#39;memory&#39;))
Traceback (most recent call last):
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/utils.py&quot;, line 680, in log_errors
    yield
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/scheduler.py&quot;, line 4455, in add_worker
    typename=types[key],
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/scheduler.py&quot;, line 2280, in _transition
    assert not args and not kwargs, (args, kwargs, start_finish)
AssertionError: ((), {&#39;worker&#39;: &#39;tcp://10.12.206.38:43525&#39;, &#39;nbytes&#39;: 64800, &#39;typename&#39;: &#39;numpy.ndarray&#39;}, (&#39;erred&#39;, &#39;memory&#39;))
distributed.core - ERROR - Exception while handling op register-worker
Traceback (most recent call last):
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/core.py&quot;, line 520, in handle_comm
    result = await result
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/scheduler.py&quot;, line 4455, in add_worker
    typename=types[key],
  File &quot;/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/scheduler.py&quot;, line 2280, in _transition
    assert not args and not kwargs, (args, kwargs, start_finish)
AssertionError: ((), {&#39;worker&#39;: &#39;tcp://10.12.206.38:43525&#39;, &#39;nbytes&#39;: 64800, &#39;typename&#39;: &#39;numpy.ndarray&#39;}, (&#39;erred&#39;, &#39;memory&#39;))
distributed.client - ERROR - Failed to reconnect to scheduler after 30.00 seconds, closing client
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/worker.py</span> in <span class="ni">dumps_function</span><span class="nt">(func)</span>
<span class="g g-Whitespace">   </span><span class="mi">4369</span>         <span class="k">with</span> <span class="n">_cache_lock</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">4370</span>             <span class="n">result</span> <span class="o">=</span> <span class="n">cache_dumps</span><span class="p">[</span><span class="n">func</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">4371</span>     <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/utils.py</span> in <span class="ni">__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">1346</span>     <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="ne">-&gt; </span><span class="mi">1347</span>         <span class="n">value</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1348</span>         <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">move_to_end</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/collections/__init__.py</span> in <span class="ni">__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">1022</span>     <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="ne">-&gt; </span><span class="mi">1023</span>         <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1024</span>             <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

<span class="ne">TypeError</span>: unhashable type: &#39;Dataset&#39;

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/protocol/pickle.py</span> in <span class="ni">dumps</span><span class="nt">(x, buffer_callback, protocol)</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span>         <span class="n">buffers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="ne">---&gt; </span><span class="mi">49</span>         <span class="n">result</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">dump_kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">50</span>         <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/client.py</span> in <span class="ni">__getstate__</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">452</span>     <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">453</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">scheduler</span><span class="o">.</span><span class="n">address</span>
<span class="g g-Whitespace">    </span><span class="mi">454</span> 

<span class="ne">AttributeError</span>: &#39;NoneType&#39; object has no attribute &#39;address&#39;

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">timed</span> <span class="n">exec</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/dask/base.py</span> in <span class="ni">compute</span><span class="nt">(traverse, optimize_graph, scheduler, get, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">569</span>         <span class="n">postcomputes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">__dask_postcompute__</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">570</span> 
<span class="ne">--&gt; </span><span class="mi">571</span>     <span class="n">results</span> <span class="o">=</span> <span class="n">schedule</span><span class="p">(</span><span class="n">dsk</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="nn">    572     return repack([f(r, *a) for r, (f, a)</span> in <span class="ni">zip</span><span class="nt">(results, postcomputes)])</span>
<span class="g g-Whitespace">    </span><span class="mi">573</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/client.py</span> in <span class="ni">get</span><span class="nt">(self, dsk, keys, workers, allow_other_workers, resources, sync, asynchronous, direct, retries, priority, fifo_timeout, actors, **kwargs)</span>
<span class="g g-Whitespace">   </span><span class="mi">2979</span>             <span class="n">retries</span><span class="o">=</span><span class="n">retries</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2980</span>             <span class="n">user_priority</span><span class="o">=</span><span class="n">priority</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">2981</span>             <span class="n">actors</span><span class="o">=</span><span class="n">actors</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2982</span>         <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2983</span>         <span class="n">packed</span> <span class="o">=</span> <span class="n">pack_data</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">futures</span><span class="p">)</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/client.py</span> in <span class="ni">_graph_to_futures</span><span class="nt">(self, dsk, keys, workers, allow_other_workers, priority, user_priority, resources, retries, fifo_timeout, actors)</span>
<span class="g g-Whitespace">   </span><span class="mi">2878</span>             <span class="c1"># Pack the high level graph before sending it to the scheduler</span>
<span class="g g-Whitespace">   </span><span class="mi">2879</span>             <span class="n">keyset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">2880</span>             <span class="n">dsk</span> <span class="o">=</span> <span class="n">dsk</span><span class="o">.</span><span class="n">__dask_distributed_pack__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keyset</span><span class="p">,</span> <span class="n">annotations</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2881</span> 
<span class="g g-Whitespace">   </span><span class="mi">2882</span>             <span class="c1"># Create futures before sending graph (helps avoid contention)</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/dask/highlevelgraph.py</span> in <span class="ni">__dask_distributed_pack__</span><span class="nt">(self, client, client_keys, annotations)</span>
<span class="g g-Whitespace">   </span><span class="mi">1075</span>                         <span class="bp">self</span><span class="o">.</span><span class="n">key_dependencies</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1076</span>                         <span class="n">client</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">1077</span>                         <span class="n">client_keys</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1078</span>                     <span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1079</span>                     <span class="s2">&quot;annotations&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">__dask_distributed_annotations_pack__</span><span class="p">(</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/dask/highlevelgraph.py</span> in <span class="ni">__dask_distributed_pack__</span><span class="nt">(self, all_hlg_keys, known_key_dependencies, client, client_keys)</span>
<span class="nn">    431             for k, v</span> in <span class="ni">dsk.items</span><span class="nt">()</span>
<span class="g g-Whitespace">    </span><span class="mi">432</span>         <span class="p">}</span>
<span class="ne">--&gt; </span><span class="mi">433</span>         <span class="n">dsk</span> <span class="o">=</span> <span class="n">toolz</span><span class="o">.</span><span class="n">valmap</span><span class="p">(</span><span class="n">dumps_task</span><span class="p">,</span> <span class="n">dsk</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">434</span>         <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;dsk&quot;</span><span class="p">:</span> <span class="n">dsk</span><span class="p">,</span> <span class="s2">&quot;dependencies&quot;</span><span class="p">:</span> <span class="n">dependencies</span><span class="p">}</span>
<span class="g g-Whitespace">    </span><span class="mi">435</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/cytoolz/dicttoolz.pyx</span> in <span class="ni">cytoolz.dicttoolz.valmap</span><span class="nt">()</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/cytoolz/dicttoolz.pyx</span> in <span class="ni">cytoolz.dicttoolz.valmap</span><span class="nt">()</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/worker.py</span> in <span class="ni">dumps_task</span><span class="nt">(task)</span>
<span class="g g-Whitespace">   </span><span class="mi">4406</span>             <span class="k">return</span> <span class="n">d</span>
<span class="g g-Whitespace">   </span><span class="mi">4407</span>         <span class="k">elif</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">_maybe_complex</span><span class="p">,</span> <span class="n">task</span><span class="p">[</span><span class="mi">1</span><span class="p">:])):</span>
<span class="ne">-&gt; </span><span class="mi">4408</span>             <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="n">dumps_function</span><span class="p">(</span><span class="n">task</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="n">warn_dumps</span><span class="p">(</span><span class="n">task</span><span class="p">[</span><span class="mi">1</span><span class="p">:])}</span>
<span class="g g-Whitespace">   </span><span class="mi">4409</span>     <span class="k">return</span> <span class="n">to_serialize</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4410</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/worker.py</span> in <span class="ni">dumps_function</span><span class="nt">(func)</span>
<span class="g g-Whitespace">   </span><span class="mi">4375</span>                 <span class="n">cache_dumps</span><span class="p">[</span><span class="n">func</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
<span class="g g-Whitespace">   </span><span class="mi">4376</span>     <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>  <span class="c1"># Unhashable function</span>
<span class="ne">-&gt; </span><span class="mi">4377</span>         <span class="n">result</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4378</span>     <span class="k">return</span> <span class="n">result</span>
<span class="g g-Whitespace">   </span><span class="mi">4379</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/protocol/pickle.py</span> in <span class="ni">dumps</span><span class="nt">(x, buffer_callback, protocol)</span>
<span class="g g-Whitespace">     </span><span class="mi">58</span>         <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">59</span>             <span class="n">buffers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="ne">---&gt; </span><span class="mi">60</span>             <span class="n">result</span> <span class="o">=</span> <span class="n">cloudpickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">dump_kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">61</span>         <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">62</span>             <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Failed to serialize </span><span class="si">%s</span><span class="s2">. Exception: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/cloudpickle/cloudpickle_fast.py</span> in <span class="ni">dumps</span><span class="nt">(obj, protocol)</span>
<span class="g g-Whitespace">    </span><span class="mi">100</span>         <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">101</span>             <span class="n">cp</span> <span class="o">=</span> <span class="n">CloudPickler</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="n">protocol</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">102</span>             <span class="n">cp</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">103</span>             <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">104</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/cloudpickle/cloudpickle_fast.py</span> in <span class="ni">dump</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">600</span>     <span class="k">def</span> <span class="nf">dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">601</span>         <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">602</span>             <span class="k">return</span> <span class="n">Pickler</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">603</span>         <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">604</span>             <span class="k">if</span> <span class="s2">&quot;recursion&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">dump</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">435</span>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">proto</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">436</span>             <span class="bp">self</span><span class="o">.</span><span class="n">framer</span><span class="o">.</span><span class="n">start_framing</span><span class="p">()</span>
<span class="ne">--&gt; </span><span class="mi">437</span>         <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">438</span>         <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">STOP</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">439</span>         <span class="bp">self</span><span class="o">.</span><span class="n">framer</span><span class="o">.</span><span class="n">end_framing</span><span class="p">()</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">547</span> 
<span class="g g-Whitespace">    </span><span class="mi">548</span>         <span class="c1"># Save the reduce() output and finally memoize the object</span>
<span class="ne">--&gt; </span><span class="mi">549</span>         <span class="bp">self</span><span class="o">.</span><span class="n">save_reduce</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="n">rv</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">550</span> 
<span class="g g-Whitespace">    </span><span class="mi">551</span>     <span class="k">def</span> <span class="nf">persistent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_reduce</span><span class="nt">(self, func, args, state, listitems, dictitems, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">636</span>         <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">637</span>             <span class="n">save</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">638</span>             <span class="n">save</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">639</span>             <span class="n">write</span><span class="p">(</span><span class="n">REDUCE</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">640</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_tuple</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">772</span>         <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">proto</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">773</span>             <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">774</span>                 <span class="n">save</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">775</span>             <span class="c1"># Subtle.  Same as in the big comment below.</span>
<span class="g g-Whitespace">    </span><span class="mi">776</span>             <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">547</span> 
<span class="g g-Whitespace">    </span><span class="mi">548</span>         <span class="c1"># Save the reduce() output and finally memoize the object</span>
<span class="ne">--&gt; </span><span class="mi">549</span>         <span class="bp">self</span><span class="o">.</span><span class="n">save_reduce</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="n">rv</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">550</span> 
<span class="g g-Whitespace">    </span><span class="mi">551</span>     <span class="k">def</span> <span class="nf">persistent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_reduce</span><span class="nt">(self, func, args, state, listitems, dictitems, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">660</span> 
<span class="g g-Whitespace">    </span><span class="mi">661</span>         <span class="k">if</span> <span class="n">state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">662</span>             <span class="n">save</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">663</span>             <span class="n">write</span><span class="p">(</span><span class="n">BUILD</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">664</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_tuple</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">772</span>         <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">proto</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">773</span>             <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">774</span>                 <span class="n">save</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">775</span>             <span class="c1"># Subtle.  Same as in the big comment below.</span>
<span class="g g-Whitespace">    </span><span class="mi">776</span>             <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_dict</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">857</span> 
<span class="g g-Whitespace">    </span><span class="mi">858</span>         <span class="bp">self</span><span class="o">.</span><span class="n">memoize</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">859</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_batch_setitems</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">860</span> 
<span class="g g-Whitespace">    </span><span class="mi">861</span>     <span class="n">dispatch</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="n">save_dict</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">_batch_setitems</span><span class="nt">(self, items)</span>
<span class="g g-Whitespace">    </span><span class="mi">883</span>                 <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">884</span>                     <span class="n">save</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">885</span>                     <span class="n">save</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">886</span>                 <span class="n">write</span><span class="p">(</span><span class="n">SETITEMS</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">887</span>             <span class="k">elif</span> <span class="n">n</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_dict</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">857</span> 
<span class="g g-Whitespace">    </span><span class="mi">858</span>         <span class="bp">self</span><span class="o">.</span><span class="n">memoize</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">859</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_batch_setitems</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">860</span> 
<span class="g g-Whitespace">    </span><span class="mi">861</span>     <span class="n">dispatch</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="n">save_dict</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">_batch_setitems</span><span class="nt">(self, items)</span>
<span class="g g-Whitespace">    </span><span class="mi">883</span>                 <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">884</span>                     <span class="n">save</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">885</span>                     <span class="n">save</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">886</span>                 <span class="n">write</span><span class="p">(</span><span class="n">SETITEMS</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">887</span>             <span class="k">elif</span> <span class="n">n</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">547</span> 
<span class="g g-Whitespace">    </span><span class="mi">548</span>         <span class="c1"># Save the reduce() output and finally memoize the object</span>
<span class="ne">--&gt; </span><span class="mi">549</span>         <span class="bp">self</span><span class="o">.</span><span class="n">save_reduce</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="n">rv</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">550</span> 
<span class="g g-Whitespace">    </span><span class="mi">551</span>     <span class="k">def</span> <span class="nf">persistent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_reduce</span><span class="nt">(self, func, args, state, listitems, dictitems, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">660</span> 
<span class="g g-Whitespace">    </span><span class="mi">661</span>         <span class="k">if</span> <span class="n">state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">662</span>             <span class="n">save</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">663</span>             <span class="n">write</span><span class="p">(</span><span class="n">BUILD</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">664</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_tuple</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">772</span>         <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">proto</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">773</span>             <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">774</span>                 <span class="n">save</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">775</span>             <span class="c1"># Subtle.  Same as in the big comment below.</span>
<span class="g g-Whitespace">    </span><span class="mi">776</span>             <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_dict</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">857</span> 
<span class="g g-Whitespace">    </span><span class="mi">858</span>         <span class="bp">self</span><span class="o">.</span><span class="n">memoize</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">859</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_batch_setitems</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">860</span> 
<span class="g g-Whitespace">    </span><span class="mi">861</span>     <span class="n">dispatch</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="n">save_dict</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">_batch_setitems</span><span class="nt">(self, items)</span>
<span class="g g-Whitespace">    </span><span class="mi">883</span>                 <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">884</span>                     <span class="n">save</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">885</span>                     <span class="n">save</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">886</span>                 <span class="n">write</span><span class="p">(</span><span class="n">SETITEMS</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">887</span>             <span class="k">elif</span> <span class="n">n</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">547</span> 
<span class="g g-Whitespace">    </span><span class="mi">548</span>         <span class="c1"># Save the reduce() output and finally memoize the object</span>
<span class="ne">--&gt; </span><span class="mi">549</span>         <span class="bp">self</span><span class="o">.</span><span class="n">save_reduce</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="n">rv</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">550</span> 
<span class="g g-Whitespace">    </span><span class="mi">551</span>     <span class="k">def</span> <span class="nf">persistent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_reduce</span><span class="nt">(self, func, args, state, listitems, dictitems, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">636</span>         <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">637</span>             <span class="n">save</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">638</span>             <span class="n">save</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">639</span>             <span class="n">write</span><span class="p">(</span><span class="n">REDUCE</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">640</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_tuple</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">787</span>         <span class="n">write</span><span class="p">(</span><span class="n">MARK</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">788</span>         <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">789</span>             <span class="n">save</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">790</span> 
<span class="g g-Whitespace">    </span><span class="mi">791</span>         <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">547</span> 
<span class="g g-Whitespace">    </span><span class="mi">548</span>         <span class="c1"># Save the reduce() output and finally memoize the object</span>
<span class="ne">--&gt; </span><span class="mi">549</span>         <span class="bp">self</span><span class="o">.</span><span class="n">save_reduce</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="n">rv</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">550</span> 
<span class="g g-Whitespace">    </span><span class="mi">551</span>     <span class="k">def</span> <span class="nf">persistent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_reduce</span><span class="nt">(self, func, args, state, listitems, dictitems, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">660</span> 
<span class="g g-Whitespace">    </span><span class="mi">661</span>         <span class="k">if</span> <span class="n">state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">662</span>             <span class="n">save</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">663</span>             <span class="n">write</span><span class="p">(</span><span class="n">BUILD</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">664</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_dict</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">857</span> 
<span class="g g-Whitespace">    </span><span class="mi">858</span>         <span class="bp">self</span><span class="o">.</span><span class="n">memoize</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">859</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_batch_setitems</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">860</span> 
<span class="g g-Whitespace">    </span><span class="mi">861</span>     <span class="n">dispatch</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="n">save_dict</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">_batch_setitems</span><span class="nt">(self, items)</span>
<span class="g g-Whitespace">    </span><span class="mi">883</span>                 <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">884</span>                     <span class="n">save</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">885</span>                     <span class="n">save</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">886</span>                 <span class="n">write</span><span class="p">(</span><span class="n">SETITEMS</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">887</span>             <span class="k">elif</span> <span class="n">n</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_dict</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">857</span> 
<span class="g g-Whitespace">    </span><span class="mi">858</span>         <span class="bp">self</span><span class="o">.</span><span class="n">memoize</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">859</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_batch_setitems</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">860</span> 
<span class="g g-Whitespace">    </span><span class="mi">861</span>     <span class="n">dispatch</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="n">save_dict</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">_batch_setitems</span><span class="nt">(self, items)</span>
<span class="g g-Whitespace">    </span><span class="mi">883</span>                 <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">884</span>                     <span class="n">save</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">885</span>                     <span class="n">save</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">886</span>                 <span class="n">write</span><span class="p">(</span><span class="n">SETITEMS</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">887</span>             <span class="k">elif</span> <span class="n">n</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">547</span> 
<span class="g g-Whitespace">    </span><span class="mi">548</span>         <span class="c1"># Save the reduce() output and finally memoize the object</span>
<span class="ne">--&gt; </span><span class="mi">549</span>         <span class="bp">self</span><span class="o">.</span><span class="n">save_reduce</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="n">rv</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">550</span> 
<span class="g g-Whitespace">    </span><span class="mi">551</span>     <span class="k">def</span> <span class="nf">persistent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_reduce</span><span class="nt">(self, func, args, state, listitems, dictitems, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">636</span>         <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">637</span>             <span class="n">save</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">638</span>             <span class="n">save</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">639</span>             <span class="n">write</span><span class="p">(</span><span class="n">REDUCE</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">640</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_tuple</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">772</span>         <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">proto</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">773</span>             <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">774</span>                 <span class="n">save</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">775</span>             <span class="c1"># Subtle.  Same as in the big comment below.</span>
<span class="g g-Whitespace">    </span><span class="mi">776</span>             <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>         <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">504</span>             <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="c1"># Call unbound method with explicit self</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="k">return</span>
<span class="g g-Whitespace">    </span><span class="mi">506</span> 

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save_dict</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">857</span> 
<span class="g g-Whitespace">    </span><span class="mi">858</span>         <span class="bp">self</span><span class="o">.</span><span class="n">memoize</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">859</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_batch_setitems</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">860</span> 
<span class="g g-Whitespace">    </span><span class="mi">861</span>     <span class="n">dispatch</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="n">save_dict</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">_batch_setitems</span><span class="nt">(self, items)</span>
<span class="g g-Whitespace">    </span><span class="mi">883</span>                 <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">884</span>                     <span class="n">save</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">885</span>                     <span class="n">save</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">886</span>                 <span class="n">write</span><span class="p">(</span><span class="n">SETITEMS</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">887</span>             <span class="k">elif</span> <span class="n">n</span><span class="p">:</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/pickle.py</span> in <span class="ni">save</span><span class="nt">(self, obj, save_persistent_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">522</span>             <span class="n">reduce</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;__reduce_ex__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">523</span>             <span class="k">if</span> <span class="n">reduce</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">524</span>                 <span class="n">rv</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proto</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">525</span>             <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">526</span>                 <span class="n">reduce</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;__reduce__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="nn">/glade/work/mclong/miniconda3/envs/metabolic/lib/python3.7/site-packages/distributed/client.py</span> in <span class="ni">__getstate__</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">451</span> 
<span class="g g-Whitespace">    </span><span class="mi">452</span>     <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">453</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">scheduler</span><span class="o">.</span><span class="n">address</span>
<span class="g g-Whitespace">    </span><span class="mi">454</span> 
<span class="g g-Whitespace">    </span><span class="mi">455</span>     <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>

<span class="ne">AttributeError</span>: &#39;NoneType&#39; object has no attribute &#39;address&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_CTmax</span> <span class="o">=</span> <span class="n">mi</span><span class="o">.</span><span class="n">open_CTmax_data</span><span class="p">()</span>
<span class="n">ds_CTmax</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:        (N: 108, percentile: 21)
Coordinates:
  * percentile     (percentile) uint8 0 5 10 15 20 25 30 ... 75 80 85 90 95 100
Dimensions without coordinates: N
Data variables:
    lat            (N) float64 21.03 27.93 60.65 55.18 ... 0.0 -60.79 34.1
    lat_dist       (N, percentile) float64 19.08 19.28 19.73 ... 50.0 63.66
    Thabitat_dist  (N, percentile) float64 19.45 20.41 22.86 ... 23.56 29.03
    CTmax          (N) float64 40.3 41.8 15.0 25.02 25.0 ... 10.0 43.0 9.0 29.0
    Species        (N) object &#x27;Kuhlia sandvicensis&#x27; ... &#x27;Phronima sedentaria&#x27;
    Phylum         (N) object &#x27;Chordata&#x27; &#x27;Chordata&#x27; ... &#x27;Chordata&#x27; &#x27;Arthropoda&#x27;</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-a8284219-2d7e-44a9-ab58-7ccedd45dc08' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-a8284219-2d7e-44a9-ab58-7ccedd45dc08' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>N</span>: 108</li><li><span class='xr-has-index'>percentile</span>: 21</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-42bdc9ef-5600-47ff-af75-2e3b9b6c9b0d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-42bdc9ef-5600-47ff-af75-2e3b9b6c9b0d' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>percentile</span></div><div class='xr-var-dims'>(percentile)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>0 5 10 15 20 25 ... 80 85 90 95 100</div><input id='attrs-da11ab67-69df-40ff-9617-1952ad6392d6' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-da11ab67-69df-40ff-9617-1952ad6392d6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7eac5476-7d21-4f1e-a812-508c2872fc81' class='xr-var-data-in' type='checkbox'><label for='data-7eac5476-7d21-4f1e-a812-508c2872fc81' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([  0,   5,  10,  15,  20,  25,  30,  35,  40,  45,  50,  55,  60,  65,
        70,  75,  80,  85,  90,  95, 100], dtype=uint8)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1c97aecf-7bf5-46a3-99f0-27fab22f410d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1c97aecf-7bf5-46a3-99f0-27fab22f410d' class='xr-section-summary' >Data variables: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(N)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>21.03 27.93 60.65 ... -60.79 34.1</div><input id='attrs-1ba86dc6-36a6-4249-9b6a-ba62446143d1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1ba86dc6-36a6-4249-9b6a-ba62446143d1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c9d958df-d827-4a5c-aee1-2db4f8a79c8d' class='xr-var-data-in' type='checkbox'><label for='data-c9d958df-d827-4a5c-aee1-2db4f8a79c8d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Median latitude of observed occurrence</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([ 21.03183305,  27.930556  ,  60.65215   ,  55.1825    ,
         0.        ,  70.40000153,  33.87717438,  52.0819397 ,
        47.86000061,  49.442     ,  33.737919  ,  27.95000076,
        26.96666718,  28.316185  ,   7.81000018,   0.        ,
         9.9000001 ,   8.        ,   0.19477116,   9.38000011,
        19.29999924,   9.71999979,   7.36999989,   8.65833331,
         9.81999969,  28.140972  ,   2.95849991,   2.95849991,
         8.61999989,  24.7005665 ,  11.12783337,  24.5782833 ,
        24.6670833 , -12.06700039, -41.7167    ,   0.        ,
       -41.7944    ,  38.65999985,  38.20913454,  55.7       ,
        46.19352778,  43.1590004 ,  35.85258333,  46.71605   ,
       -29.717669  ,   0.        , -42.20097222, -29.9808    ,
       -41.61045   , -42.05005556,  43.78559875, -66.278     ,
       -73.8       , -68.577     ,   0.        ,  13.07250023,
         0.        ,  60.29337   , -66.75320053, -67.451     ,
       -71.31      ,  11.16666985,  24.6371835 ,  22.0603    ,
        10.81982   ,  17.70166492,  27.24103492,  51.86378322,
        52.9975    ,  20.48783333,  38.5199533 ,  39.3162    ,
        50.7633    ,  51.58505035,  43.70000076,  47.1002    ,
        50.75      ,  50.355     , -33.75      , -26.914267  ,
       -34.34999847,   0.        , -14.2166996 , -14.283     ,
       -14.541196  ,  -9.158     ,  34.45000076, -33.587845  ,
       -66.66699982, -67.6       , -66.66666412, -62.15396   ,
       -62.34333333, -71.53      ,   0.        , -71.343     ,
       -68.57352448, -68.583     ,   0.        , -39.370915  ,
       -43.5667    , -45.446499  , -36.36      ,   0.        ,
       -68.74641684,   0.        , -60.78784947,  34.1       ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat_dist</span></div><div class='xr-var-dims'>(N, percentile)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>19.08 19.28 19.73 ... 50.0 63.66</div><input id='attrs-48d912e4-24f6-4717-aae8-db07d75005d3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-48d912e4-24f6-4717-aae8-db07d75005d3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-88ee71c6-e363-4676-ad11-34403596aba8' class='xr-var-data-in' type='checkbox'><label for='data-88ee71c6-e363-4676-ad11-34403596aba8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude distribution of observed occurence</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([[ 19.0755    ,  19.28137529,  19.731783  , ...,  28.22725   ,
         28.27845   ,  28.43205   ],
       [-44.5127    , -28.0052    , -27.8448    , ...,  28.715278  ,
         29.827778  ,  55.85829926],
       [ 26.48      ,  46.43      ,  47.39      , ...,  70.62949808,
         71.981192  ,  87.18000031],
       ...,
       [  0.        ,   0.        ,   0.        , ...,   0.        ,
          0.        ,   0.        ],
       [-66.36166382, -64.8013916 , -64.78333282, ..., -53.81666565,
        -53.63666534, -53.        ],
       [-60.30799866, -47.3       , -41.61665   , ...,  49.207     ,
         50.        ,  63.664     ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>Thabitat_dist</span></div><div class='xr-var-dims'>(N, percentile)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>19.45 20.41 22.86 ... 23.56 29.03</div><input id='attrs-afcdbc07-95e9-41bb-99de-98bfef75eca3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-afcdbc07-95e9-41bb-99de-98bfef75eca3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b59fed47-f6c7-4fae-b93f-6ef67769103b' class='xr-var-data-in' type='checkbox'><label for='data-b59fed47-f6c7-4fae-b93f-6ef67769103b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Distribution of inhabited temperature</dd><dt><span>units :</span></dt><dd>°C</dd></dl></div><div class='xr-var-data'><pre>array([[19.44511032, 20.40909004, 22.86405468, ..., 26.42900085,
        26.76129913, 27.00979042],
       [-0.49991003, 18.94791031, 20.22079086, ..., 29.03040886,
        29.23319054, 32.59408951],
       [-2.09411001, -1.75711   , -1.58840001, ...,  3.63968992,
         4.70994606, 19.34589958],
       ...,
       [        nan,         nan,         nan, ...,         nan,
                nan,         nan],
       [-2.00610995, -1.74900997, -1.40171999, ...,  1.97501004,
         2.72249007,  4.45930004],
       [-1.43761003,  3.52685499,  4.80599499, ..., 21.37919044,
        23.56348991, 29.02809906]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>CTmax</span></div><div class='xr-var-dims'>(N)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>40.3 41.8 15.0 ... 43.0 9.0 29.0</div><input id='attrs-a51639a9-0911-4563-ba25-4df397608479' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a51639a9-0911-4563-ba25-4df397608479' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-621c85f9-a4e4-41db-80ab-166a6974e7cb' class='xr-var-data-in' type='checkbox'><label for='data-621c85f9-a4e4-41db-80ab-166a6974e7cb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>CTmax</dd><dt><span>units :</span></dt><dd>°C</dd></dl></div><div class='xr-var-data'><pre>array([40.3 , 41.8 , 15.  , 25.02, 25.  , 25.  , 24.3 , 24.5 , 21.9 ,
       33.5 , 31.4 , 31.7 , 36.5 , 43.1 , 35.9 , 34.7 , 39.6 , 35.2 ,
       35.8 , 35.4 , 38.  , 37.2 , 35.8 , 37.4 , 38.2 , 40.8 , 35.3 ,
       37.7 , 36.  , 40.  , 40.  , 40.  , 35.  , 29.  , 26.9 , 30.6 ,
       28.5 , 37.  , 33.5 , 32.5 , 32.5 , 29.1 , 32.5 , 20.  , 25.6 ,
       26.3 , 25.  , 28.1 , 25.1 , 25.6 , 30.  ,  9.  ,  4.  , 15.  ,
       35.7 , 35.7 , 19.6 , 25.  , 10.  ,  4.  ,  4.5 , 34.7 , 36.6 ,
       39.  , 37.1 , 36.  , 35.6 , 33.8 , 33.3 , 27.38, 33.8 , 31.1 ,
       34.1 , 32.2 , 33.8 , 38.  , 34.4 , 32.9 , 34.7 , 33.  , 35.  ,
       41.6 , 42.4 , 44.5 , 40.5 , 40.1 , 32.  , 30.  ,  6.  ,  6.  ,
        6.  , 15.  , 13.  , 19.  , 20.  , 14.  , 12.  , 15.02, 14.  ,
       29.  , 29.4 , 26.8 , 32.7 , 31.8 , 10.  , 43.  ,  9.  , 29.  ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>Species</span></div><div class='xr-var-dims'>(N)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;Kuhlia sandvicensis&#x27; ... &#x27;Phron...</div><input id='attrs-724cbcce-e2e4-4c27-be7f-190e4833cf10' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-724cbcce-e2e4-4c27-be7f-190e4833cf10' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-200e750b-9420-49d1-bf22-00a846b1693d' class='xr-var-data-in' type='checkbox'><label for='data-200e750b-9420-49d1-bf22-00a846b1693d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Species</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;Kuhlia sandvicensis&#x27;, &#x27;Mugil cephalus&#x27;, &#x27;Boreogadus saida&#x27;,
       &#x27;Gammarus locusta&#x27;, &#x27;NA&#x27;, &#x27;Onisimus litoralis&#x27;,
       &#x27;Ascidia ceratodes&#x27;, &#x27;Bugulina californica&#x27;,
       &#x27;Distaplia occidentalis&#x27;, &#x27;Metacarcinus magister&#x27;,
       &#x27;Girella nigricans&#x27;, &#x27;Atherinops affinis&#x27;, &#x27;Fundulus parvipinnis&#x27;,
       &#x27;Hypanus sabinus&#x27;, &#x27;Apogon dovii&#x27;, &#x27;NA&#x27;, &#x27;Bathygobius ramosus&#x27;,
       &#x27;Chromis atrilobata&#x27;, &#x27;Cirrhitichthys oxycephalus&#x27;,
       &#x27;Coryphopterus urospilus&#x27;, &#x27;Eucinostomus gracilis&#x27;,
       &#x27;Haemulon steindachneri&#x27;, &#x27;Halichoeres dispilus&#x27;,
       &#x27;Lutjanus guttatus&#x27;, &#x27;Malacoctenus zonifer&#x27;, &#x27;Mugil curema&#x27;,
       &#x27;Plagiotremus azaleus&#x27;, &#x27;Stegastes acapulcoensis&#x27;,
       &#x27;Thalassoma lucasanum&#x27;, &#x27;Abudefduf saxatilis&#x27;,
       &#x27;Haemulon bonariense&#x27;, &#x27;Lutjanus apodus&#x27;, &#x27;Scarus iseri&#x27;,
       &#x27;Argopecten purpuratus&#x27;, &#x27;Gari solida&#x27;, &#x27;NA&#x27;, &#x27;Semele solida&#x27;,
       &#x27;Gemma gemma&#x27;, &#x27;Mulinia lateralis&#x27;, &#x27;Mya arenaria&#x27;,
       &#x27;Menidia menidia&#x27;, &#x27;Pseudopleuronectes americanus&#x27;,
       &#x27;Sphoeroides maculatus&#x27;, &#x27;Pungitius pungitius&#x27;, &#x27;Aulacomya atra&#x27;,
       &#x27;NA&#x27;, &#x27;Ensis macha&#x27;, &#x27;Leukoma thaca&#x27;, &#x27;Tagelus dombeii&#x27;,
       &#x27;Ameghinomya antiqua&#x27;, &#x27;Tautogolabrus adspersus&#x27;,
       &#x27;Laternula elliptica&#x27;, &#x27;Adamussium colbecki&#x27;, &#x27;Odontaster validus&#x27;,
...
       &#x27;Pachycara brachycephalum&#x27;, &#x27;Limopsis marionensis&#x27;,
       &#x27;Liothyrella uva&#x27;, &#x27;Hippolyte obliquimanus&#x27;,
       &#x27;Parablennius marmoreus&#x27;, &#x27;Barbatia domingensis&#x27;,
       &#x27;Echinometra lucunter&#x27;, &#x27;Eucidaris tribuloides&#x27;,
       &#x27;Ophiostigma abnorme&#x27;, &#x27;Crangon crangon&#x27;, &#x27;Dicentrarchus labrax&#x27;,
       &#x27;Diplodus bellottii&#x27;, &#x27;Diplodus sargus&#x27;, &#x27;Diplodus vulgaris&#x27;,
       &#x27;Gobius niger&#x27;, &#x27;Liocarcinus marmoreus&#x27;, &#x27;Lipophrys trigloides&#x27;,
       &#x27;Chelon ramada&#x27;, &#x27;Palaemon longirostris&#x27;, &#x27;Pegusa lascaris&#x27;,
       &#x27;Bullia rhodostoma&#x27;, &#x27;Donax serra&#x27;, &#x27;Donax sordidus&#x27;, &#x27;NA&#x27;,
       &#x27;Bathygobius fuscus&#x27;, &#x27;Ellochelon vaigiensis&#x27;, &#x27;Dascyllus aruanus&#x27;,
       &#x27;Ostorhinchus novemfasciatus&#x27;, &#x27;Engraulis japonicus&#x27;,
       &#x27;Sardinops sagax&#x27;, &#x27;Trematomus bernacchii&#x27;,
       &#x27;Pagothenia borchgrevinki&#x27;, &#x27;Trematomus hansoni&#x27;,
       &#x27;Eudorella splendida&#x27;, &#x27;Heterophoxus videns&#x27;,
       &#x27;Margarella refulgens&#x27;, &#x27;NA&#x27;, &#x27;Subonoba gelida&#x27;,
       &#x27;Orchomenella pinguides&#x27;, &#x27;Paramoera walkeri&#x27;, &#x27;NA&#x27;,
       &#x27;Cnemidocarpa bicornuta&#x27;, &#x27;Liothyrella neozelanica&#x27;,
       &#x27;Pseudechinus huttoni&#x27;, &#x27;Cookia sulcata&#x27;, &#x27;NA&#x27;,
       &#x27;Parakanthophoreus antarcticus&#x27;, &#x27;NA&#x27;, &#x27;Lindbergichthys nudifrons&#x27;,
       &#x27;Phronima sedentaria&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>Phylum</span></div><div class='xr-var-dims'>(N)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;Chordata&#x27; ... &#x27;Arthropoda&#x27;</div><input id='attrs-e66b9eb0-4030-4a0d-9ef2-1837f4953fc3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e66b9eb0-4030-4a0d-9ef2-1837f4953fc3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4c9d3d3e-73aa-4b86-a520-22de8db7d360' class='xr-var-data-in' type='checkbox'><label for='data-4c9d3d3e-73aa-4b86-a520-22de8db7d360' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Phylum</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Arthropoda&#x27;, &#x27;NA&#x27;,
       &#x27;Arthropoda&#x27;, &#x27;Chordata&#x27;, &#x27;Bryozoa&#x27;, &#x27;Chordata&#x27;, &#x27;Arthropoda&#x27;,
       &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;NA&#x27;,
       &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;,
       &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;,
       &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;,
       &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Mollusca&#x27;, &#x27;Mollusca&#x27;, &#x27;NA&#x27;, &#x27;Mollusca&#x27;,
       &#x27;Mollusca&#x27;, &#x27;Mollusca&#x27;, &#x27;Mollusca&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;,
       &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Mollusca&#x27;, &#x27;NA&#x27;, &#x27;Mollusca&#x27;, &#x27;Mollusca&#x27;,
       &#x27;Mollusca&#x27;, &#x27;Mollusca&#x27;, &#x27;Chordata&#x27;, &#x27;Mollusca&#x27;, &#x27;Mollusca&#x27;,
       &#x27;Echinodermata&#x27;, &#x27;NA&#x27;, &#x27;Chordata&#x27;, &#x27;NA&#x27;, &#x27;Arthropoda&#x27;, &#x27;Chordata&#x27;,
       &#x27;Mollusca&#x27;, &#x27;Brachiopoda&#x27;, &#x27;Arthropoda&#x27;, &#x27;Chordata&#x27;, &#x27;Mollusca&#x27;,
       &#x27;Echinodermata&#x27;, &#x27;Echinodermata&#x27;, &#x27;Echinodermata&#x27;, &#x27;Arthropoda&#x27;,
       &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;,
       &#x27;Arthropoda&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Arthropoda&#x27;, &#x27;Chordata&#x27;,
       &#x27;Mollusca&#x27;, &#x27;Mollusca&#x27;, &#x27;Mollusca&#x27;, &#x27;NA&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;,
       &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Chordata&#x27;,
       &#x27;Chordata&#x27;, &#x27;Chordata&#x27;, &#x27;Arthropoda&#x27;, &#x27;Arthropoda&#x27;, &#x27;Mollusca&#x27;,
       &#x27;NA&#x27;, &#x27;Mollusca&#x27;, &#x27;Arthropoda&#x27;, &#x27;Arthropoda&#x27;, &#x27;NA&#x27;, &#x27;Chordata&#x27;,
       &#x27;Brachiopoda&#x27;, &#x27;Echinodermata&#x27;, &#x27;Mollusca&#x27;, &#x27;NA&#x27;, &#x27;Arthropoda&#x27;,
       &#x27;NA&#x27;, &#x27;Chordata&#x27;, &#x27;Arthropoda&#x27;], dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-cdddecb0-03d7-476d-8180-263e7ae54634' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-cdddecb0-03d7-476d-8180-263e7ae54634' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">dsets_out</span><span class="p">[</span><span class="s1">&#39;woa2018&#39;</span><span class="p">]</span>
<span class="n">v</span> <span class="o">=</span> <span class="s1">&#39;ATmax_resting&#39;</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">axes</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">])</span>

<span class="c1"># k = np.where(ds_CTmax.lat != 0)[0]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds_CTmax</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">ds_CTmax</span><span class="o">.</span><span class="n">CTmax</span><span class="p">,</span> <span class="s1">&#39;k.&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">scratch</span><span class="o">/</span><span class="n">mclong</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ipykernel_154805</span><span class="o">/</span><span class="mf">2384568910.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">ds</span> <span class="o">=</span> <span class="n">dsets_out</span><span class="p">[</span><span class="s1">&#39;woa2018&#39;</span><span class="p">]</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">v</span> <span class="o">=</span> <span class="s1">&#39;ATmax_resting&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">p</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">axes</span>

<span class="ne">KeyError</span>: &#39;woa2018&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">dsets_out</span><span class="p">[</span><span class="s1">&#39;woa2018&#39;</span><span class="p">]</span>
<span class="n">v</span> <span class="o">=</span> <span class="s1">&#39;ATmax_active&#39;</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">axes</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">])</span>

<span class="c1"># k = np.where(ds_CTmax.lat != 0)[0]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds_CTmax</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">ds_CTmax</span><span class="o">.</span><span class="n">CTmax</span><span class="p">,</span> <span class="s1">&#39;k.&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="n">clobber</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">this_notebook</span> <span class="o">=</span> <span class="s1">&#39;compute-zonal-safety-margin-metrics.ipynb&#39;</span>

<span class="n">curator</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">curator_local_assets</span><span class="p">()</span>

<span class="k">for</span> <span class="n">ds_key</span><span class="p">,</span> <span class="n">dso</span> <span class="ow">in</span> <span class="n">dsets_out</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;zonal-safety-margin-metrics-</span><span class="si">{</span><span class="n">ds_key</span><span class="si">}</span><span class="s1">&#39;</span>

    <span class="k">if</span> <span class="n">clobber</span><span class="p">:</span>
        <span class="n">cache_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">dc</span><span class="o">.</span><span class="n">cache_dir</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">.zarr&#39;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">cache_file</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">dso</span><span class="o">.</span><span class="n">to_zarr</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">consolidated</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">curator</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">urlpath</span><span class="o">=</span><span class="n">cache_file</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Zonal safety margin metrics computed from </span><span class="si">{</span><span class="n">ds_key</span><span class="si">}</span><span class="s1"> by </span><span class="si">{</span><span class="n">this_notebook</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;zarr&#39;</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dso</span><span class="o">.</span><span class="n">nbytes</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">**</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "conda-env-miniconda3-metabolic-py"
        },
        kernelOptions: {
            kernelName: "conda-env-miniconda3-metabolic-py",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'conda-env-miniconda3-metabolic-py'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Matthew C. Long, Curtis Deutsch, Precious Mongwe, Takamitsu Ito<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>